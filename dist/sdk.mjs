const t=[{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.1,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.6,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:5.4,sepal_width:3.9,petal_length:1.7,petal_width:.4,species:"setosa"},{sepal_length:4.6,sepal_width:3.4,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.4,sepal_width:2.9,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.4,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.1,species:"setosa"},{sepal_length:4.3,sepal_width:3,petal_length:1.1,petal_width:.1,species:"setosa"},{sepal_length:5.8,sepal_width:4,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.7,sepal_width:4.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.4,sepal_width:3.9,petal_length:1.3,petal_width:.4,species:"setosa"},{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.7,sepal_width:3.8,petal_length:1.7,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.5,petal_width:.3,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.7,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.7,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:4.6,sepal_width:3.6,petal_length:1,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.3,petal_length:1.7,petal_width:.5,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.9,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.6,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:3.5,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5.2,sepal_width:3.4,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.1,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:4.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.5,sepal_width:4.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5,sepal_width:3.2,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.5,sepal_width:3.5,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.6,petal_length:1.4,petal_width:.1,species:"setosa"},{sepal_length:4.4,sepal_width:3,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.5,sepal_width:2.3,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.4,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.6,petal_width:.6,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.9,petal_width:.4,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:5.3,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:7,sepal_width:3.2,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:6.4,sepal_width:3.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6.9,sepal_width:3.1,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:5.5,sepal_width:2.3,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.5,sepal_width:2.8,petal_length:4.6,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.8,petal_length:4.5,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:4.7,petal_width:1.6,species:"versicolor"},{sepal_length:4.9,sepal_width:2.4,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:6.6,sepal_width:2.9,petal_length:4.6,petal_width:1.3,species:"versicolor"},{sepal_length:5.2,sepal_width:2.7,petal_length:3.9,petal_width:1.4,species:"versicolor"},{sepal_length:5,sepal_width:2,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.9,sepal_width:3,petal_length:4.2,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:2.2,petal_length:4,petal_width:1,species:"versicolor"},{sepal_length:6.1,sepal_width:2.9,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:2.9,petal_length:3.6,petal_width:1.3,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:4.1,petal_width:1,species:"versicolor"},{sepal_length:6.2,sepal_width:2.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.6,sepal_width:2.5,petal_length:3.9,petal_width:1.1,species:"versicolor"},{sepal_length:5.9,sepal_width:3.2,petal_length:4.8,petal_width:1.8,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:2.5,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4.7,petal_width:1.2,species:"versicolor"},{sepal_length:6.4,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:6.6,sepal_width:3,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:6.8,sepal_width:2.8,petal_length:4.8,petal_width:1.4,species:"versicolor"},{sepal_length:6.7,sepal_width:3,petal_length:5,petal_width:1.7,species:"versicolor"},{sepal_length:6,sepal_width:2.9,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.6,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.8,petal_width:1.1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.7,petal_width:1,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:3.9,petal_width:1.2,species:"versicolor"},{sepal_length:6,sepal_width:2.7,petal_length:5.1,petal_width:1.6,species:"versicolor"},{sepal_length:5.4,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:3.4,petal_length:4.5,petal_width:1.6,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.7,petal_width:1.5,species:"versicolor"},{sepal_length:6.3,sepal_width:2.3,petal_length:4.4,petal_width:1.3,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.1,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.5,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.6,petal_length:4.4,petal_width:1.2,species:"versicolor"},{sepal_length:6.1,sepal_width:3,petal_length:4.6,petal_width:1.4,species:"versicolor"},{sepal_length:5.8,sepal_width:2.6,petal_length:4,petal_width:1.2,species:"versicolor"},{sepal_length:5,sepal_width:2.3,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:5.6,sepal_width:2.7,petal_length:4.2,petal_width:1.3,species:"versicolor"},{sepal_length:5.7,sepal_width:3,petal_length:4.2,petal_width:1.2,species:"versicolor"},{sepal_length:5.7,sepal_width:2.9,petal_length:4.2,petal_width:1.3,species:"versicolor"},{sepal_length:6.2,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:5.1,sepal_width:2.5,petal_length:3,petal_width:1.1,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:6,petal_width:2.5,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:7.1,sepal_width:3,petal_length:5.9,petal_width:2.1,species:"virginica"},{sepal_length:6.3,sepal_width:2.9,petal_length:5.6,petal_width:1.8,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.8,petal_width:2.2,species:"virginica"},{sepal_length:7.6,sepal_width:3,petal_length:6.6,petal_width:2.1,species:"virginica"},{sepal_length:4.9,sepal_width:2.5,petal_length:4.5,petal_width:1.7,species:"virginica"},{sepal_length:7.3,sepal_width:2.9,petal_length:6.3,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:2.5,petal_length:5.8,petal_width:1.8,species:"virginica"},{sepal_length:7.2,sepal_width:3.6,petal_length:6.1,petal_width:2.5,species:"virginica"},{sepal_length:6.5,sepal_width:3.2,petal_length:5.1,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.7,petal_length:5.3,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3,petal_length:5.5,petal_width:2.1,species:"virginica"},{sepal_length:5.7,sepal_width:2.5,petal_length:5,petal_width:2,species:"virginica"},{sepal_length:5.8,sepal_width:2.8,petal_length:5.1,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.2,petal_length:5.3,petal_width:2.3,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:7.7,sepal_width:3.8,petal_length:6.7,petal_width:2.2,species:"virginica"},{sepal_length:7.7,sepal_width:2.6,petal_length:6.9,petal_width:2.3,species:"virginica"},{sepal_length:6,sepal_width:2.2,petal_length:5,petal_width:1.5,species:"virginica"},{sepal_length:6.9,sepal_width:3.2,petal_length:5.7,petal_width:2.3,species:"virginica"},{sepal_length:5.6,sepal_width:2.8,petal_length:4.9,petal_width:2,species:"virginica"},{sepal_length:7.7,sepal_width:2.8,petal_length:6.7,petal_width:2,species:"virginica"},{sepal_length:6.3,sepal_width:2.7,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3.2,petal_length:6,petal_width:1.8,species:"virginica"},{sepal_length:6.2,sepal_width:2.8,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.1,sepal_width:3,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3,petal_length:5.8,petal_width:1.6,species:"virginica"},{sepal_length:7.4,sepal_width:2.8,petal_length:6.1,petal_width:1.9,species:"virginica"},{sepal_length:7.9,sepal_width:3.8,petal_length:6.4,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.2,species:"virginica"},{sepal_length:6.3,sepal_width:2.8,petal_length:5.1,petal_width:1.5,species:"virginica"},{sepal_length:6.1,sepal_width:2.6,petal_length:5.6,petal_width:1.4,species:"virginica"},{sepal_length:7.7,sepal_width:3,petal_length:6.1,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:3.4,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.1,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:6,sepal_width:3,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.4,petal_width:2.1,species:"virginica"},{sepal_length:6.7,sepal_width:3.1,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.1,petal_width:2.3,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3.2,petal_length:5.9,petal_width:2.3,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.5,species:"virginica"},{sepal_length:6.7,sepal_width:3,petal_length:5.2,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:2.5,petal_length:5,petal_width:1.9,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.2,petal_width:2,species:"virginica"},{sepal_length:6.2,sepal_width:3.4,petal_length:5.4,petal_width:2.3,species:"virginica"},{sepal_length:5.9,sepal_width:3,petal_length:5.1,petal_width:1.8,species:"virginica"}],e=async function(t){const e=t.split(/\r?\n/),r=e[0].split(","),i=[];i.headers=r;for(let t=1;t<e.length-1;t++){const s={},o=e[t].split(",");for(let t=0;t<r.length;t++)s[r[t]]=n(o[t]);i.push(s)}return i},n=function(t){return isNaN(t)?t:Number(t)},r=function(t){return t.filter(t=>"number"==typeof t)},i=function(t){return t.filter(t=>"number"!=typeof t)},s=function(t){return t.map(t=>{const e={};for(const n in t)"number"==typeof t[n]&&(e[n]=t[n]);return e})},o=function(t){return t.map(t=>{const e={};for(const n in t)"number"!=typeof t[n]&&(e[n]=t[n]);return e})},a=function(t){if(null==t)throw new Error("No data passed to function.");if(!Array.isArray(t)||"object"!=typeof t[0]||null===t[0])throw new Error("First argument must be an array of objects");const e=t;if(!t.columns){const t=new Set;for(const n of e)for(const e of Object.keys(n))t.add(e);e.columns=[...t]}return e.columns.forEach(t=>{Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{get:function(){return this.map(e=>e[t])},set:function(e){if(!e)throw new Error(`No data passed to set ${t} column.`);if(e.length!==this.length)throw new Error(`Data length (${e.length}) different from column ${t} length (${this.length}).`);this.forEach((n,r)=>n[t]=e[r])}})}),e},l=async function(t){const e=await import("https://cdn.skypack.dev/d3@7"),n=JSON.parse(JSON.stringify(t)),r=a(n);return r.columns.forEach(t=>{const n=r[t],i=e.mean(n),s=e.deviation(n);r[t]=n.map(t=>null!=t?(t-i)/s:t)}),r},h=async function(t,e){const n=document.getElementById(e);n.innerHTML="";const r=t.split("\n");for(const t of r){const e=t.split(","),r=document.createElement("tr");for(const t of e){const e=document.createElement("td");e.textContent=t,r.appendChild(e)}n.appendChild(r)}},u=async function(t={}){const{text:e="No text provided",divid:n="",width:r=460,height:i=150,border:s="2px solid",color:o="red"}=t;if(document.getElementById(n)){console.log("textbox div provided in function parameters.");const t=document.getElementById(n);t.id=n,t.style.display="block",t.style.overflow="scroll",t.style.width=r+"px",t.style.height=i+"px",t.style.border=s+" "+o,t.style.resize="both",t.appendChild(document.createElement("br")),t.appendChild(document.createElement("br")),t.appendChild(document.createElement("br")),h(e,n)}else if(document.getElementById("textboxDiv"))console.log("textbox div exists. updating contents..."),h(e,"textboxDiv");else{console.log("textbox div NOT provided in function parameters. creating div...");const t=document.createElement("table");t.id="textboxDiv",t.appendChild(document.createElement("br")),t.appendChild(document.createElement("br")),t.appendChild(document.createElement("br")),document.body.appendChild(t),h(e,"textboxDiv"),t.style.display="block",t.style.overflow="scroll",t.style.width=r+"px",t.style.height=i+"px",t.style.border=s+" "+o,t.style.resize="both"}return document.getElementById("textboxDiv")};function c(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function f(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function p(t){let e,n,r;function i(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<0?i=e+1:s=e}while(i<s)}return i}return 2!==t.length?(e=c,n=(e,n)=>c(t(e),n),r=(e,n)=>t(e)-n):(e=t===c||t===f?t:g,n=t,r=t),{left:i,center:function(t,e,n=0,s=t.length){const o=i(t,e,n,s-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<=0?i=e+1:s=e}while(i<s)}return i}}}function g(){return 0}const m=p(c).right;p(function(t){return null===t?NaN:+t}).center;class d extends Map{constructor(t,e=_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(w(this,t))}has(t){return super.has(w(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function w({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function _(t){return null!==t&&"object"==typeof t?t.valueOf():t}const y=Math.sqrt(50),v=Math.sqrt(10),b=Math.sqrt(2);function x(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=y?10:s>=v?5:s>=b?2:1;let a,l,h;return i<0?(h=Math.pow(10,-i)/o,a=Math.round(t*h),l=Math.round(e*h),a/h<t&&++a,l/h>e&&--l,h=-h):(h=Math.pow(10,i)*o,a=Math.round(t/h),l=Math.round(e/h),a*h<t&&++a,l*h>e&&--l),l<a&&.5<=n&&n<2?x(t,e,2*n):[a,l,h]}function M(t,e,n){return x(t=+t,e=+e,n=+n)[2]}function E(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function S(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function A(t){return t}var k=1e-6;function N(t){return"translate("+t+",0)"}function R(t){return"translate(0,"+t+")"}function C(t){return e=>+t(e)}function I(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function T(){return!this.__axis}function $(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,h=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",c=1===t||3===t?N:R;function f(f){var p=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,g=null==i?e.tickFormat?e.tickFormat.apply(e,n):A:i,m=Math.max(s,0)+a,d=e.range(),w=+d[0]+l,_=+d[d.length-1]+l,y=(e.bandwidth?I:C)(e.copy(),l),v=f.selection?f.selection():f,b=v.selectAll(".domain").data([null]),x=v.selectAll(".tick").data(p,e).order(),M=x.exit(),E=x.enter().append("g").attr("class","tick"),S=x.select("line"),N=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",h*s)),N=N.merge(E.append("text").attr("fill","currentColor").attr(u,h*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==v&&(b=b.transition(f),x=x.transition(f),S=S.transition(f),N=N.transition(f),M=M.transition(f).attr("opacity",k).attr("transform",function(t){return isFinite(t=y(t))?c(t+l):this.getAttribute("transform")}),E.attr("opacity",k).attr("transform",function(t){var e=this.parentNode.__axis;return c((e&&isFinite(e=e(t))?e:y(t))+l)})),M.remove(),b.attr("d",4===t||2===t?o?"M"+h*o+","+w+"H"+l+"V"+_+"H"+h*o:"M"+l+","+w+"V"+_:o?"M"+w+","+h*o+"V"+l+"H"+_+"V"+h*o:"M"+w+","+l+"H"+_),x.attr("opacity",1).attr("transform",function(t){return c(y(t)+l)}),S.attr(u+"2",h*s),N.attr(u,h*m).text(g),v.filter(T).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),v.each(function(){this.__axis=y})}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(s=o=+t,f):s},f.tickSizeInner=function(t){return arguments.length?(s=+t,f):s},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(a=+t,f):a},f.offset=function(t){return arguments.length?(l=+t,f):l},f}var P={value:()=>{}};function V(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new q(r)}function q(t){this._=t}function D(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function j(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=P,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}q.prototype=V.prototype={constructor:q,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=j(i[n],t.name,e);else if(null==e)for(n in i)i[n]=j(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=D(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new q(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var z="http://www.w3.org/1999/xhtml",O={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),O.hasOwnProperty(e)?{space:O[e],local:t}:t}function L(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===z&&e.documentElement.namespaceURI===z?e.createElement(t):e.createElementNS(n,t)}}function U(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function B(t){var e=F(t);return(e.local?U:L)(e)}function H(){}function X(t){return null==t?H:function(){return this.querySelector(t)}}function Y(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function W(){return[]}function G(t){return null==t?W:function(){return this.querySelectorAll(t)}}function J(t){return function(){return this.matches(t)}}function Q(t){return function(e){return e.matches(t)}}var K=Array.prototype.find;function Z(){return this.firstElementChild}var tt=Array.prototype.filter;function et(){return Array.from(this.children)}function nt(t){return new Array(t.length)}function rt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function it(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new rt(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function st(t,e,n,r,i,s,o){var a,l,h,u=new Map,c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(p[a]=h=o.call(l,l.__data__,a,e)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<f;++a)h=o.call(t,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new rt(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(p[a])===l&&(i[a]=l)}function ot(t){return t.__data__}function at(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function lt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ht(t){return function(){this.removeAttribute(t)}}function ut(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ct(t,e){return function(){this.setAttribute(t,e)}}function ft(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function gt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dt(t){return function(){this.style.removeProperty(t)}}function wt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _t(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function yt(t,e){return t.style.getPropertyValue(e)||mt(t).getComputedStyle(t,null).getPropertyValue(e)}function vt(t){return function(){delete this[t]}}function bt(t,e){return function(){this[t]=e}}function xt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Mt(t){return t.trim().split(/^|\s+/)}function Et(t){return t.classList||new St(t)}function St(t){this._node=t,this._names=Mt(t.getAttribute("class")||"")}function At(t,e){for(var n=Et(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function kt(t,e){for(var n=Et(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Nt(t){return function(){At(this,t)}}function Rt(t){return function(){kt(this,t)}}function Ct(t,e){return function(){(e.apply(this,arguments)?At:kt)(this,t)}}function It(){this.textContent=""}function Tt(t){return function(){this.textContent=t}}function $t(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Pt(){this.innerHTML=""}function Vt(t){return function(){this.innerHTML=t}}function qt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Dt(){this.nextSibling&&this.parentNode.appendChild(this)}function jt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zt(){return null}function Ot(){var t=this.parentNode;t&&t.removeChild(this)}function Ft(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Lt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ut(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Bt(t,e,n){return function(){var r,i=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Ht(t,e,n){var r=mt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Xt(t,e){return function(){return Ht(this,t,e)}}function Yt(t,e){return function(){return Ht(this,t,e.apply(this,arguments))}}rt.prototype={constructor:rt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},St.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Wt=[null];function Gt(t,e){this._groups=t,this._parents=e}function Jt(){return new Gt([[document.documentElement]],Wt)}function Qt(t){return function(t){return"string"==typeof t?new Gt([[document.querySelector(t)]],[document.documentElement]):new Gt([[t]],Wt)}(B(t).call(document.documentElement))}function Kt(t){return"string"==typeof t?new Gt([document.querySelectorAll(t)],[document.documentElement]):new Gt([Y(t)],Wt)}function Zt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function te(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ee(){}Gt.prototype=Jt.prototype={constructor:Gt,select:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new Gt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Y(t.apply(this,arguments))}}(t):G(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new Gt(r,i)},selectChild:function(t){return this.select(null==t?Z:function(t){return function(){return K.call(this.children,t)}}("function"==typeof t?t:Q(t)))},selectChildren:function(t){return this.selectAll(null==t?et:function(t){return function(){return tt.call(this.children,t)}}("function"==typeof t?t:Q(t)))},filter:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Gt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ot);var n,r=e?st:it,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],p=f.length,g=at(t.call(c,c&&c.__data__,u,i)),m=g.length,d=l[u]=new Array(m),w=a[u]=new Array(m);r(c,f,d,w,h[u]=new Array(p),g,e);for(var _,y,v=0,b=0;v<m;++v)if(_=d[v]){for(v>=b&&(b=v+1);!(y=w[b])&&++b<m;);_._next=y||null}}return(a=new Gt(a,i))._enter=l,a._exit=h,a},enter:function(){return new Gt(this._enter||this._groups.map(nt),this._parents)},exit:function(){return new Gt(this._exit||this._groups.map(nt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var h,u=n[l],c=r[l],f=u.length,p=a[l]=new Array(f),g=0;g<f;++g)(h=u[g]||c[g])&&(p[g]=h);for(;l<i;++l)a[l]=n[l];return new Gt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=lt);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(e)}return new Gt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=F(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ut:ht:"function"==typeof e?n.local?gt:pt:n.local?ft:ct)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?dt:"function"==typeof e?_t:wt)(t,e,null==n?"":n)):yt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?vt:"function"==typeof e?xt:bt)(t,e)):this.node()[t]},classed:function(t,e){var n=Mt(t+"");if(arguments.length<2){for(var r=Et(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Ct:e?Nt:Rt)(n,e))},text:function(t){return arguments.length?this.each(null==t?It:("function"==typeof t?$t:Tt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Pt:("function"==typeof t?qt:Vt)(t)):this.node().innerHTML},raise:function(){return this.each(Dt)},lower:function(){return this.each(jt)},append:function(t){var e="function"==typeof t?t:B(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:B(t),r=null==e?zt:"function"==typeof e?e:X(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Ot)},clone:function(t){return this.select(t?Lt:Ft)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Bt:Ut,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Yt:Xt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var ne=.7,re=1/ne,ie="\\s*([+-]?\\d+)\\s*",se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ae=/^#([0-9a-f]{3,8})$/,le=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),he=new RegExp(`^rgb\\(${oe},${oe},${oe}\\)$`),ue=new RegExp(`^rgba\\(${ie},${ie},${ie},${se}\\)$`),ce=new RegExp(`^rgba\\(${oe},${oe},${oe},${se}\\)$`),fe=new RegExp(`^hsl\\(${se},${oe},${oe}\\)$`),pe=new RegExp(`^hsla\\(${se},${oe},${oe},${se}\\)$`),ge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function me(){return this.rgb().formatHex()}function de(){return this.rgb().formatRgb()}function we(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_e(e):3===n?new be(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ye(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ye(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=le.exec(t))?new be(e[1],e[2],e[3],1):(e=he.exec(t))?new be(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ue.exec(t))?ye(e[1],e[2],e[3],e[4]):(e=ce.exec(t))?ye(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fe.exec(t))?ke(e[1],e[2]/100,e[3]/100,1):(e=pe.exec(t))?ke(e[1],e[2]/100,e[3]/100,e[4]):ge.hasOwnProperty(t)?_e(ge[t]):"transparent"===t?new be(NaN,NaN,NaN,0):null}function _e(t){return new be(t>>16&255,t>>8&255,255&t,1)}function ye(t,e,n,r){return r<=0&&(t=e=n=NaN),new be(t,e,n,r)}function ve(t,e,n,r){return 1===arguments.length?((i=t)instanceof ee||(i=we(i)),i?new be((i=i.rgb()).r,i.g,i.b,i.opacity):new be):new be(t,e,n,null==r?1:r);var i}function be(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function xe(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}`}function Me(){const t=Ee(this.opacity);return`${1===t?"rgb(":"rgba("}${Se(this.r)}, ${Se(this.g)}, ${Se(this.b)}${1===t?")":`, ${t})`}`}function Ee(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Se(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ae(t){return((t=Se(t))<16?"0":"")+t.toString(16)}function ke(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Re(t,e,n,r)}function Ne(t){if(t instanceof Re)return new Re(t.h,t.s,t.l,t.opacity);if(t instanceof ee||(t=we(t)),!t)return new Re;if(t instanceof Re)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Re(o,a,l,t.opacity)}function Re(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ce(t){return(t=(t||0)%360)<0?t+360:t}function Ie(t){return Math.max(0,Math.min(1,t||0))}function Te(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Zt(ee,we,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:me,formatHex:me,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ne(this).formatHsl()},formatRgb:de,toString:de}),Zt(be,ve,te(ee,{brighter(t){return t=null==t?re:Math.pow(re,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ne:Math.pow(ne,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new be(Se(this.r),Se(this.g),Se(this.b),Ee(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xe,formatHex:xe,formatHex8:function(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}${Ae(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Me,toString:Me})),Zt(Re,function(t,e,n,r){return 1===arguments.length?Ne(t):new Re(t,e,n,null==r?1:r)},te(ee,{brighter(t){return t=null==t?re:Math.pow(re,t),new Re(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ne:Math.pow(ne,t),new Re(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new be(Te(t>=240?t-240:t+120,i,r),Te(t,i,r),Te(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Re(Ce(this.h),Ie(this.s),Ie(this.l),Ee(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ee(this.opacity);return`${1===t?"hsl(":"hsla("}${Ce(this.h)}, ${100*Ie(this.s)}%, ${100*Ie(this.l)}%${1===t?")":`, ${t})`}`}}));var $e=t=>()=>t;function Pe(t){return 1===(t=+t)?Ve:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):$e(isNaN(e)?n:e)}}function Ve(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):$e(isNaN(t)?e:t)}var qe=function t(e){var n=Pe(e);function r(t,e){var r=n((t=ve(t)).r,(e=ve(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=Ve(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function De(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(s){for(n=0;n<r;++n)i[n]=t[n]*(1-s)+e[n]*s;return i}}function je(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,s=new Array(i),o=new Array(r);for(n=0;n<i;++n)s[n]=He(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=s[n](t);return o}}function ze(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fe(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=He(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Le=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ue=new RegExp(Le.source,"g");function Be(t,e){var n,r,i,s=Le.lastIndex=Ue.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(n=Le.exec(t))&&(r=Ue.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Oe(n,r)})),s=Ue.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})}function He(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?$e(e):("number"===i?Oe:"string"===i?(n=we(e))?(e=n,qe):Be:e instanceof we?qe:e instanceof Date?ze:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?je:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Fe:Oe:De))(t,e)}function Xe(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ye,We=180/Math.PI,Ge={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Je(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*We,skewX:Math.atan(l)*We,scaleX:o,scaleY:a}}function Qe(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],l=[];return s=t(s),o=t(o),function(t,r,i,s,o,a){if(t!==i||r!==s){var l=o.push("translate(",null,e,null,n);a.push({i:l-4,x:Oe(t,i)},{i:l-2,x:Oe(r,s)})}else(i||s)&&o.push("translate("+i+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Oe(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(s.rotate,o.rotate,a,l),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Oe(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(s.skewX,o.skewX,a,l),function(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Oe(t,n)},{i:a-2,x:Oe(e,r)})}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,l),s=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Ke,Ze,tn=Qe(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ge:Je(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),en=Qe(function(t){return null==t?Ge:(Ye||(Ye=document.createElementNS("http://www.w3.org/2000/svg","g")),Ye.setAttribute("transform",t),(t=Ye.transform.baseVal.consolidate())?Je((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ge)},", ",")",")"),nn=0,rn=0,sn=0,on=0,an=0,ln=0,hn="object"==typeof performance&&performance.now?performance:Date,un="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cn(){return an||(un(fn),an=hn.now()+ln)}function fn(){an=0}function pn(){this._call=this._time=this._next=null}function gn(t,e,n){var r=new pn;return r.restart(t,e,n),r}function mn(){an=(on=hn.now())+ln,nn=rn=0;try{!function(){cn(),++nn;for(var t,e=Ke;e;)(t=an-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nn}()}finally{nn=0,function(){var t,e,n=Ke,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ke=e);Ze=t,wn(r)}(),an=0}}function dn(){var t=hn.now(),e=t-on;e>1e3&&(ln-=e,on=t)}function wn(t){nn||(rn&&(rn=clearTimeout(rn)),t-an>24?(t<1/0&&(rn=setTimeout(mn,t-hn.now()-ln)),sn&&(sn=clearInterval(sn))):(sn||(on=hn.now(),sn=setInterval(dn,1e3)),nn=1,un(mn)))}function _n(t,e,n){var r=new pn;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}pn.prototype=gn.prototype={constructor:pn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?cn():+n)+(null==e?0:+e),this._next||Ze===this||(Ze?Ze._next=this:Ke=this,Ze=this),this._call=t,this._time=n,wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,wn())}};var yn=V("start","end","cancel","interrupt"),vn=[];function bn(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(s){var h,u,c,f;if(1!==n.state)return l();for(h in i)if((f=i[h]).name===n.name){if(3===f.state)return _n(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[h]):+h<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[h])}if(_n(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(c=n.tween.length),h=0,u=-1;h<c;++h)(f=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),s=-1,o=r.length;++s<o;)r[s].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=gn(s,0,n.time)}(t,n,{name:e,index:r,group:i,on:yn,tween:vn,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function xn(t,e){var n=En(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Mn(t,e){var n=En(t,e);if(n.state>3)throw new Error("too late; already running");return n}function En(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Sn(t,e){var n,r;return function(){var i=Mn(this,t),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function An(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=Mn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,h=i.length;l<h;++l)if(i[l].name===e){i[l]=a;break}l===h&&i.push(a)}s.tween=i}}function kn(t,e,n){var r=t._id;return t.each(function(){var t=Mn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return En(t,r).value[e]}}function Nn(t,e){var n;return("number"==typeof e?Oe:e instanceof we?qe:(n=we(e))?(e=n,qe):Be)(t,e)}function Rn(t){return function(){this.removeAttribute(t)}}function Cn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function In(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function Tn(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function $n(t,e,n){var r,i,s;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,l));this.removeAttribute(t)}}function Pn(t,e,n){var r,i,s;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function Vn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function qn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Dn(t,e){return function(){xn(this,t).delay=+e.apply(this,arguments)}}function jn(t,e){return e=+e,function(){xn(this,t).delay=e}}function zn(t,e){return function(){Mn(this,t).duration=+e.apply(this,arguments)}}function On(t,e){return e=+e,function(){Mn(this,t).duration=e}}var Fn=Jt.prototype.constructor;function Ln(t){return function(){this.style.removeProperty(t)}}var Un=0;function Bn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Hn(){return++Un}var Xn=Jt.prototype;Bn.prototype={constructor:Bn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=X(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,h=r[o],u=h.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,bn(c[f],e,n,f,c,En(a,n)));return new Bn(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=G(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,h=r[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,p=t.call(l,l.__data__,c,h),g=En(l,n),m=0,d=p.length;m<d;++m)(f=p[m])&&bn(f,e,n,m,p,g);s.push(p),o.push(l)}return new Bn(s,o,e,n)},selectChild:Xn.selectChild,selectChildren:Xn.selectChildren,filter:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Bn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l,h=e[a],u=n[a],c=h.length,f=o[a]=new Array(c),p=0;p<c;++p)(l=h[p]||u[p])&&(f[p]=l);for(;a<r;++a)o[a]=e[a];return new Bn(o,this._parents,this._name,this._id)},selection:function(){return new Fn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Hn(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)if(o=a[h]){var u=En(o,e);bn(o,t,n,h,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Bn(r,this._parents,t,n)},call:Xn.call,nodes:Xn.nodes,node:Xn.node,size:Xn.size,empty:Xn.empty,each:Xn.each,on:function(t,e){var n=this._id;return arguments.length<2?En(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?xn:Mn;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=F(t),r="transform"===n?en:Nn;return this.attrTween(t,"function"==typeof e?(n.local?Pn:$n)(n,r,kn(this,"attr."+t,e)):null==e?(n.local?Cn:Rn)(n):(n.local?Tn:In)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=F(t);return this.tween(n,(r.local?Vn:qn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?tn:Nn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=yt(this,t),o=(this.style.removeProperty(t),yt(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}(t,r)).on("end.style."+t,Ln(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var o=yt(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=yt(this,t)),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}(t,r,kn(this,"style."+t,e))).each(function(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var l=Mn(this,t),h=l.on,u=null==l.value[o]?s||(s=Ln(e)):void 0;h===n&&i===u||(r=(n=h).copy()).on(a,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var o=yt(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,s,n)),r}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(kn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=En(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?Sn:An)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Dn:jn)(e,t)):En(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?zn:On)(e,t)):En(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Mn(this,t).ease=e}}(e,t)):En(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Mn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){0===--i&&s()}};n.each(function(){var n=Mn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e}),0===i&&s()})},[Symbol.iterator]:Xn[Symbol.iterator]};var Yn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Wn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Gn(t,e){if(!isFinite(t)||0===t)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Jn(t){return(t=Gn(Math.abs(t)))?t[1]:NaN}Jt.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}}(this,t)})},Jt.prototype.transition=function(t){var e,n;t instanceof Bn?(e=t._id,t=t._name):(e=Hn(),(n=Yn).time=cn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)(o=a[h])&&bn(o,t,e,h,a,n||Wn(o,e));return new Bn(r,this._parents,t,e)};var Qn,Kn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zn(t){if(!(e=Kn.exec(t)))throw new Error("invalid format: "+t);var e;return new tr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function tr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function er(t,e){var n=Gn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Zn.prototype=tr.prototype,tr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var nr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>er(100*t,e),r:er,s:function(t,e){var n=Gn(t,e);if(!n)return Qn=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(Qn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Gn(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rr(t){return t}var ir,sr,or,ar=Array.prototype.map,lr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hr(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?rr:(e=ar.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?rr:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(ar.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t,e){var n=(t=Zn(t)).fill,c=t.align,f=t.sign,p=t.symbol,g=t.zero,m=t.width,d=t.comma,w=t.precision,_=t.trim,y=t.type;"n"===y?(d=!0,y="g"):nr[y]||(void 0===w&&(w=12),_=!0,y="g"),(g||"0"===n&&"="===c)&&(g=!0,n="0",c="=");var v=(e&&void 0!==e.prefix?e.prefix:"")+("$"===p?i:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():""),b=("$"===p?s:/[%p]/.test(y)?l:"")+(e&&void 0!==e.suffix?e.suffix:""),x=nr[y],M=/[defgprs%]/.test(y);function E(t){var e,i,s,l=v,p=b;if("c"===y)p=x(t)+p,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),w),_&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0===+t&&"+"!==f&&(E=!1),l=(E?"("===f?f:h:"-"===f||"("===f?"":f)+l,p=("s"!==y||isNaN(t)||void 0===Qn?"":lr[8+Qn/3])+p+(E&&"("===f?")":""),M)for(e=-1,i=t.length;++e<i;)if(48>(s=t.charCodeAt(e))||s>57){p=(46===s?o+t.slice(e+1):t.slice(e))+p,t=t.slice(0,e);break}}d&&!g&&(t=r(t,1/0));var S=l.length+t.length+p.length,A=S<m?new Array(m-S+1).join(n):"";switch(d&&g&&(t=r(A+t,A.length?m-p.length:1/0),A=""),c){case"<":t=l+t+p+A;break;case"=":t=l+A+t+p;break;case"^":t=A.slice(0,S=A.length>>1)+l+t+p+A.slice(S);break;default:t=A+l+t+p}return a(t)}return w=void 0===w?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),E.toString=function(){return t+""},E}return{format:c,formatPrefix:function(t,e){var n=3*Math.max(-8,Math.min(8,Math.floor(Jn(e)/3))),r=Math.pow(10,-n),i=c(((t=Zn(t)).type="f",t),{suffix:lr[8+n/3]});return function(t){return i(r*t)}}}}function ur(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}ir=hr({thousands:",",grouping:[3],currency:["$",""]}),sr=ir.format,or=ir.formatPrefix;const cr=Symbol("implicit");function fr(){var t=new d,e=[],n=[],r=cr;function i(i){let s=t.get(i);if(void 0===s){if(r!==cr)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new d;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return fr(e,n).unknown(r)},ur.apply(i,arguments),i}function pr(t){return+t}var gr=[0,1];function mr(t){return t}function dr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function wr(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=dr(i,r),s=n(o,s)):(r=dr(r,i),s=n(s,o)),function(t){return s(r(t))}}function _r(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=dr(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=m(t,e,1,r)-1;return s[n](i[n](e))}}function yr(){var t,e,n,r,i,s,o=gr,a=gr,l=He,h=mr;function u(){var t,e,n,l=Math.min(o.length,a.length);return h!==mr&&(t=o[0],e=o[l-1],t>e&&(n=t,t=e,e=n),h=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?_r:wr,i=s=null,c}function c(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),a,l)))(t(h(e)))}return c.invert=function(n){return h(e((s||(s=r(a,o.map(t),Oe)))(n)))},c.domain=function(t){return arguments.length?(o=Array.from(t,pr),u()):o.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),l=Xe,u()},c.clamp=function(t){return arguments.length?(h=!!t||mr,u()):h!==mr},c.interpolate=function(t){return arguments.length?(l=t,u()):l},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,r){return t=n,e=r,u()}}function vr(t,e,n,r){var i,s=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?M(e,t,n):M(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Zn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Jn(e)/3)))-Jn(Math.abs(t)))}(s,o))||(r.precision=i),or(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jn(e)-Jn(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Jn(Math.abs(t)))}(s))||(r.precision=i-2*("%"===r.type))}return sr(r)}function br(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,s,o]=r?x(e,t,n):x(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let t=0;t<a;++t)l[t]=(s-t)/-o;else for(let t=0;t<a;++t)l[t]=(s-t)*o;else if(o<0)for(let t=0;t<a;++t)l[t]=(i+t)/-o;else for(let t=0;t<a;++t)l[t]=(i+t)*o;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return vr(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,s=e(),o=0,a=s.length-1,l=s[o],h=s[a],u=10;for(h<l&&(i=l,l=h,h=i,i=o,o=a,a=i);u-- >0;){if((i=M(l,h,n))===r)return s[o]=l,s[a]=h,e(s);if(i>0)l=Math.floor(l/i)*i,h=Math.ceil(h/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,h=Math.floor(h*i)/i}r=i}return t},t}function xr(){var t=yr()(mr,mr);return t.copy=function(){return e=t,xr().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},ur.apply(t,arguments),br(t)}function Mr(t,e,n){this.k=t,this.x=e,this.y=n}Mr.prototype={constructor:Mr,scale:function(t){return 1===t?this:new Mr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Mr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Mr.prototype;var Er="$";function Sr(){}function Ar(t,e){var n=new Sr;if(t instanceof Sr)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,s=t.length;if(null==e)for(;++i<s;)n.set(i,t[i]);else for(;++i<s;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function kr(){}Sr.prototype=Ar.prototype={constructor:Sr,has:function(t){return Er+t in this},get:function(t){return this[Er+t]},set:function(t,e){return this[Er+t]=e,this},remove:function(t){var e=Er+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Er&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Er&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Er&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Er&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Er&&++t;return t},empty:function(){for(var t in this)if(t[0]===Er)return!1;return!0},each:function(t){for(var e in this)e[0]===Er&&t(this[e],e.slice(1),this)}};var Nr=Ar.prototype;kr.prototype={constructor:kr,has:Nr.has,add:function(t){return this[Er+(t+="")]=t,this},remove:Nr.remove,clear:Nr.clear,values:Nr.keys,size:Nr.size,empty:Nr.empty,each:Nr.each};var Rr="http://www.w3.org/1999/xhtml",Cr={svg:"http://www.w3.org/2000/svg",xhtml:Rr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ir(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Cr.hasOwnProperty(e)?{space:Cr[e],local:t}:t}function Tr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Rr&&e.documentElement.namespaceURI===Rr?e.createElement(t):e.createElementNS(n,t)}}function $r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pr(t){var e=Ir(t);return(e.local?$r:Tr)(e)}function Vr(){}function qr(t){return null==t?Vr:function(){return this.querySelector(t)}}function Dr(){return[]}function jr(t){return new Array(t.length)}function zr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zr.prototype={constructor:zr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Or(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new zr(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function Fr(t,e,n,r,i,s,o){var a,l,h,u={},c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(p[a]=h="$"+o.call(l,l.__data__,a,e),h in u?i[a]=l:u[h]=l);for(a=0;a<f;++a)(l=u[h="$"+o.call(t,s[a],a,s)])?(r[a]=l,l.__data__=s[a],u[h]=null):n[a]=new zr(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u[p[a]]===l&&(i[a]=l)}function Lr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ur(t){return function(){this.removeAttribute(t)}}function Br(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hr(t,e){return function(){this.setAttribute(t,e)}}function Xr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Yr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Wr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Gr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jr(t){return function(){this.style.removeProperty(t)}}function Qr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Kr(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Zr(t){return function(){delete this[t]}}function ti(t,e){return function(){this[t]=e}}function ei(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ni(t){return t.trim().split(/^|\s+/)}function ri(t){return t.classList||new ii(t)}function ii(t){this._node=t,this._names=ni(t.getAttribute("class")||"")}function si(t,e){for(var n=ri(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function oi(t,e){for(var n=ri(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ai(t){return function(){si(this,t)}}function li(t){return function(){oi(this,t)}}function hi(t,e){return function(){(e.apply(this,arguments)?si:oi)(this,t)}}function ui(){this.textContent=""}function ci(t){return function(){this.textContent=t}}function fi(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pi(){this.innerHTML=""}function gi(t){return function(){this.innerHTML=t}}function mi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function di(){this.nextSibling&&this.parentNode.appendChild(this)}function wi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _i(){return null}function yi(){var t=this.parentNode;t&&t.removeChild(this)}function vi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}ii.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var xi={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(xi={mouseenter:"mouseover",mouseleave:"mouseout"}));function Mi(t,e,n){return t=Ei(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Ei(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Si(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Ai(t,e,n){var r=xi.hasOwnProperty(t.type)?Mi:Ei;return function(i,s,o){var a,l=this.__on,h=r(e,s,o);if(l)for(var u=0,c=l.length;u<c;++u)if((a=l[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=h,a.capture=n),void(a.value=e);this.addEventListener(t.type,h,n),a={type:t.type,name:t.name,value:e,listener:h,capture:n},l?l.push(a):this.__on=[a]}}function ki(t,e,n){var r=Gr(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ni(t,e){return function(){return ki(this,t,e)}}function Ri(t,e){return function(){return ki(this,t,e.apply(this,arguments))}}var Ci=[null];function Ii(t,e){this._groups=t,this._parents=e}function Ti(){return new Ii([[document.documentElement]],Ci)}function $i(t){return"string"==typeof t?new Ii([[document.querySelector(t)]],[document.documentElement]):new Ii([[t]],Ci)}function Pi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vi(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if("function"==typeof e){var n=function t(){var n=!1;try{n=this instanceof t}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),n}Ii.prototype=Ti.prototype={constructor:Ii,select:function(t){"function"!=typeof t&&(t=qr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new Ii(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?Dr:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new Ii(r,i)},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Ii(r,this._parents)},data:function(t,e){if(!t)return g=new Array(this.size()),u=-1,this.each(function(t){g[++u]=t}),g;var n,r=e?Fr:Or,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],p=f.length,g=t.call(c,c&&c.__data__,u,i),m=g.length,d=l[u]=new Array(m),w=a[u]=new Array(m);r(c,f,d,w,h[u]=new Array(p),g,e);for(var _,y,v=0,b=0;v<m;++v)if(_=d[v]){for(v>=b&&(b=v+1);!(y=w[b])&&++b<m;);_._next=y||null}}return(a=new Ii(a,i))._enter=l,a._exit=h,a},enter:function(){return new Ii(this._enter||this._groups.map(jr),this._parents)},exit:function(){return new Ii(this._exit||this._groups.map(jr),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l,h=e[a],u=n[a],c=h.length,f=o[a]=new Array(c),p=0;p<c;++p)(l=h[p]||u[p])&&(f[p]=l);for(;a<r;++a)o[a]=e[a];return new Ii(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Lr);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(e)}return new Ii(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=Ir(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Br:Ur:"function"==typeof e?n.local?Wr:Yr:n.local?Xr:Hr)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Jr:"function"==typeof e?Kr:Qr)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||Gr(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Zr:"function"==typeof e?ei:ti)(t,e)):this.node()[t]},classed:function(t,e){var n=ni(t+"");if(arguments.length<2){for(var r=ri(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?hi:e?ai:li)(n,e))},text:function(t){return arguments.length?this.each(null==t?ui:("function"==typeof t?fi:ci)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pi:("function"==typeof t?mi:gi)(t)):this.node().innerHTML},raise:function(){return this.each(di)},lower:function(){return this.each(wi)},append:function(t){var e="function"==typeof t?t:Pr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Pr(t),r=null==e?_i:"function"==typeof e?e:qr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(yi)},clone:function(t){return this.select(t?bi:vi)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Ai:Si,null==n&&(n=!1),r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Ri:Ni)(t,e))}};var qi={};const Di=Object.prototype.toString;function ji(t){const e=Di.call(t);return e.endsWith("Array]")&&!e.includes("Big")}var zi=Vi(Object.freeze({__proto__:null,isAnyArray:ji}));var Oi,Fi=Vi(Object.freeze({__proto__:null,default:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ji(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!ji(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ji(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,s=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],a=r+1;a<s;a++)t[a]<o&&(o=t[a]);return o}(t),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ji(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,s=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],a=r+1;a<s;a++)t[a]>o&&(o=t[a]);return o}(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=n.min,o=void 0===s?n.autoMinMax?r:0:s,a=n.max,l=void 0===a?n.autoMinMax?i:1:a;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var h=(l-o)/(i-r),u=0;u<t.length;u++)e[u]=(t[u]-r)*h+o;return e}}));function Li(){if(Oi)return qi;Oi=1,Object.defineProperty(qi,"__esModule",{value:!0});var t=zi,e=Fi;const n=" ".repeat(2),r=" ".repeat(4);function i(t,e={}){const{maxRows:i=15,maxColumns:o=10,maxNumSize:a=8,padMinus:l="auto"}=e;return`${t.constructor.name} {\n${n}[\n${r}${function(t,e,n,i,o){const{rows:a,columns:l}=t,h=Math.min(a,e),u=Math.min(l,n),c=[];if("auto"===o){o=!1;t:for(let e=0;e<h;e++)for(let n=0;n<u;n++)if(t.get(e,n)<0){o=!0;break t}}for(let e=0;e<h;e++){let n=[];for(let r=0;r<u;r++)n.push(s(t.get(e,r),i,o));c.push(`${n.join(" ")}`)}u!==l&&(c[c.length-1]+=` ... ${l-n} more columns`);h!==a&&c.push(`... ${a-e} more rows`);return c.join(`\n${r}`)}(t,i,o,a,l)}\n${n}]\n${n}rows: ${t.rows}\n${n}columns: ${t.columns}\n}`}function s(t,e,n){return(t>=0&&n?` ${o(t,e-1)}`:o(t,e)).padEnd(e)}function o(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function a(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function l(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function h(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function u(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function c(e,n){if(!t.isAnyArray(n))throw new TypeError("row indices must be an array");for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.rows)throw new RangeError("row indices are out of range")}function f(e,n){if(!t.isAnyArray(n))throw new TypeError("column indices must be an array");for(let t=0;t<n.length;t++)if(n[t]<0||n[t]>=e.columns)throw new RangeError("column indices are out of range")}function p(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(m("startRow",e),m("endRow",n),m("startColumn",r),m("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function g(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function m(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function d(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class w{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new v(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){let e=new v(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new v(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new v(t,e)}static ones(t,e){return new v(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new v(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)i.set(n,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:s=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let o=i-r,a=new v(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++){let e=r+Math.round(s()*o);a.set(n,t,e)}return a}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<r;t++)i.set(t,t,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),s=this.zeros(e,n);for(let e=0;e<i;e++)s.set(e,e,t[e]);return s}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new v(n,r);for(let s=0;s<n;s++)for(let n=0;n<r;n++)i.set(s,n,Math.min(t.get(s,n),e.get(s,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let s=0;s<n;s++)for(let n=0;n<r;n++)i.set(s,n,Math.max(t.get(s,n),e.get(s,n)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new v(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let s=n+1;s<t.columns;s++)t.set(r,s,t.get(r,s)-t.get(e,s)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;for(;r>=0;)if(0===t.maxRow(r))r--;else{let i=0,s=!1;for(;i<n&&!1===s;)1===t.get(r,i)?s=!0:i++;for(let n=0;n<r;n++){let s=t.get(n,i);for(let o=i;o<e;o++){let e=t.get(n,o)-s*t.get(r,o);t.set(n,o,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new v(this.rows*e,this.columns*n);for(let t=0;t<e;t++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*t,this.columns*e);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){a(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return v.rowVector(this.getRow(t))}setRow(t,e){a(this,t),e=h(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){a(this,t),a(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){l(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return v.columnVector(this.getColumn(t))}setColumn(t,e){l(this,t),e=u(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l(this,t),l(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=u(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=u(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=u(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=u(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){a(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){d(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){d(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(a(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){a(this,t),d(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(a(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){a(this,t),d(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l(this,t),d(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l(this,t),d(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=v.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new v(e,r),s=new Float64Array(n);for(let o=0;o<r;o++){for(let e=0;e<n;e++)s[e]=t.get(e,o);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*s[r];i.set(t,o,e)}}return i}mpow(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");let e=v.eye(this.rows),n=this;for(let r=t;r>=1;r/=2)1&r&&(e=e.mmul(n)),n=n.mmul(n);return e}strassen2x2(t){t=v.checkMatrix(t);let e=new v(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),s=t.get(0,1),o=this.get(1,0),a=t.get(1,0),l=this.get(1,1),h=t.get(1,1),u=(n+l)*(r+h),c=(o+l)*r,f=n*(s-h),p=l*(a-r),g=(n+i)*h,m=u+p-g+(i-l)*(a+h),d=f+g,w=c+p,_=u-c+f+(o-n)*(r+s);return e.set(0,0,m),e.set(0,1,d),e.set(1,0,w),e.set(1,1,_),e}strassen3x3(t){t=v.checkMatrix(t);let e=new v(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),s=this.get(1,0),o=this.get(1,1),a=this.get(1,2),l=this.get(2,0),h=this.get(2,1),u=this.get(2,2),c=t.get(0,0),f=t.get(0,1),p=t.get(0,2),g=t.get(1,0),m=t.get(1,1),d=t.get(1,2),w=t.get(2,0),_=t.get(2,1),y=t.get(2,2),b=(n-s)*(-f+m),x=(-n+s+o)*(c-f+m),M=(s+o)*(-c+f),E=n*c,S=(-n+l+h)*(c-p+d),A=(-n+l)*(p-d),k=(l+h)*(-c+p),N=(-i+h+u)*(m+w-_),R=(i-u)*(m-_),C=i*w,I=(h+u)*(-w+_),T=(-i+o+a)*(d+w-y),$=(i-a)*(d-y),P=(o+a)*(-w+y),V=E+C+r*g,q=(n+r+i-s-o-h-u)*m+x+M+E+N+C+I,D=E+S+k+(n+r+i-o-a-l-h)*d+C+T+P,j=b+o*(-c+f+g-m-d-w+y)+x+E+C+T+$,z=b+x+M+E+a*_,O=C+T+$+P+s*p,F=E+S+A+h*(-c+p+g-m-d-w+_)+N+R+C,L=N+R+C+I+l*f,U=E+S+A+k+u*y;return e.set(0,0,V),e.set(0,1,q),e.set(0,2,D),e.set(1,0,j),e.set(1,1,z),e.set(1,2,O),e.set(2,0,F),e.set(2,1,L),e.set(2,2,U),e}mmulStrassen(t){t=v.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,s=t.columns;function o(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=w.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${s} matrix: dimensions do not match.`);let a=Math.max(n,i),l=Math.max(r,s);return e=o(e,a,l),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=o(e,r+1,i+1),n=o(n,r+1,i+1)):r%2==1?(e=o(e,r+1,i),n=o(n,r+1,i)):i%2==1&&(e=o(e,r,i+1),n=o(n,r,i+1));let s=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),l=e.subMatrix(0,s-1,0,a-1),h=n.subMatrix(0,s-1,0,a-1),u=e.subMatrix(0,s-1,a,e.columns-1),c=n.subMatrix(0,s-1,a,n.columns-1),f=e.subMatrix(s,e.rows-1,0,a-1),p=n.subMatrix(s,n.rows-1,0,a-1),g=e.subMatrix(s,e.rows-1,a,e.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),d=t(w.add(l,g),w.add(h,m),s,a),_=t(w.add(f,g),h,s,a),y=t(l,w.sub(c,m),s,a),v=t(g,w.sub(p,h),s,a),b=t(w.add(l,u),m,s,a),x=t(w.sub(f,l),w.add(h,c),s,a),M=t(w.sub(u,g),w.add(p,m),s,a),E=w.add(d,v);E.sub(b),E.add(M);let S=w.add(y,b),A=w.add(_,v),k=w.sub(d,_);k.add(y),k.add(x);let N=w.zeros(2*E.rows,2*E.columns);return N=N.setSubMatrix(E,0,0),N=N.setSubMatrix(S,E.rows,0),N=N.setSubMatrix(A,0,E.columns),N=N.setSubMatrix(k,E.rows,E.columns),N.subMatrix(0,r-1,0,i-1)}(e,t=o(t,a,l),a,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:n=0,max:r=1}=t;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let i=new v(this.rows,this.columns);for(let t=0;t<this.rows;t++){const s=this.getRow(t);s.length>0&&e(s,{min:n,max:r,output:s}),i.setRow(t,s)}return i}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:n=0,max:r=1}=t;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let i=new v(this.rows,this.columns);for(let t=0;t<this.columns;t++){const s=this.getColumn(t);s.length&&e(s,{min:n,max:r,output:s}),i.setColumn(t,s)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=v.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,s=new v(e*r,n*i);for(let o=0;o<e;o++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let a=0;a<i;a++)s.set(r*o+n,i*e+a,this.get(o,e)*t.get(n,a));return s}kroneckerSum(t){if(t=v.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(v.eye(n,n)),i=v.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new v(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=_){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=_){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){p(this,t,e,n,r);let i=new v(e-t+1,r-n+1);for(let s=t;s<=e;s++)for(let e=n;e<=r;e++)i.set(s-t,e-n,this.get(s,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new v(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let s=e;s<=n;s++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,s-e,this.get(t[i],s))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new v(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let s=e;s<=n;s++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(s-e,i,this.get(s,t[i]))}return r}setSubMatrix(t,e,n){if((t=v.checkMatrix(t)).isEmpty())return this;p(this,e,e+t.rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}selection(t,e){c(this,t),f(this,e);let n=new v(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let s=e[t];n.set(r,t,this.get(i,s))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){return this.constructor.copy(this,new v(this.rows,this.columns))}static copy(t,e){for(const[n,r,i]of t.entries())e.set(n,r,i);return e}sum(t){switch(t){case"row":return function(t){let e=g(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){let e=g(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=g(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){let e=g(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(e,n={}){if("object"==typeof e&&(n=e,e=void 0),"object"!=typeof n)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:i=this.mean(e)}=n;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!t.isAnyArray(i))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,s=[];for(let o=0;o<r;o++){let r=0,a=0,l=0;for(let e=0;e<i;e++)l=t.get(o,e)-n[o],r+=l,a+=l*l;e?s.push((a-r*r/i)/(i-1)):s.push((a-r*r/i)/i)}return s}(this,r,i);case"column":if(!t.isAnyArray(i))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,s=[];for(let o=0;o<i;o++){let i=0,a=0,l=0;for(let e=0;e<r;e++)l=t.get(e,o)-n[o],i+=l,a+=l*l;e?s.push((a-i*i/r)/(r-1)):s.push((a-i*i/r)/r)}return s}(this,r,i);case void 0:if("number"!=typeof i)throw new TypeError("mean must be a number");return function(t,e,n){const r=t.rows,i=t.columns,s=r*i;let o=0,a=0,l=0;for(let e=0;e<r;e++)for(let r=0;r<i;r++)l=t.get(e,r)-n,o+=l,a+=l*l;return e?(a-o*o/s)/(s-1):(a-o*o/s)/s}(this,r,i);default:throw new Error(`invalid option: ${e}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(e,n={}){if("object"==typeof e&&(n=e,e=void 0),"object"!=typeof n)throw new TypeError("options must be an object");const{center:r=this.mean(e)}=n;switch(e){case"row":if(!t.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,r),this;case"column":if(!t.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,r),this;default:throw new Error(`invalid option: ${e}`)}}scale(e,n={}){if("object"==typeof e&&(n=e,e=void 0),"object"!=typeof n)throw new TypeError("options must be an object");let r=n.scale;switch(e){case"row":if(void 0===r)r=function(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=t.get(n,e)**2/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!t.isAnyArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=t.get(e,n)**2/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!t.isAnyArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=t.get(i,r)**2/e;return Math.sqrt(n)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,r),this;default:throw new Error(`invalid option: ${e}`)}}toString(t){return i(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function _(t,e){return t-e}function y(t){return t.every(t=>"number"==typeof t)}w.prototype.klass="Matrix","undefined"!=typeof Symbol&&(w.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return i(this)}),w.random=w.rand,w.randomInt=w.randInt,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct;class v extends w{data;#t(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}constructor(e,n){if(super(),v.isMatrix(e))this.#t(e.rows,e.columns),v.copy(e,this);else if(Number.isInteger(e)&&e>=0)this.#t(e,n);else{if(!t.isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");{const t=e;if("number"!=typeof(n=(e=t.length)?t[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<e;r++){if(t[r].length!==n)throw new RangeError("Inconsistent array dimensions");if(!y(t[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(t[r]))}this.rows=e,this.columns=n}}}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return a(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),a(this,t,!0),e=Float64Array.from(h(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){l(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),l(this,t,!0),e=u(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)**t);return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)**t.get(e,n));return this}}(w,v);class b extends w{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return v.isMatrix(t)&&"SymmetricMatrix"===t.klassType}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),v.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");this.#e=v.copy(t,new v(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new v(t,t);else if(this.#e=new v(t),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const t=new b(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())t.set(e,n,r);return t}toMatrix(){return new v(this)}get(t,e){return this.#e.get(t,e)}set(t,e,n){return this.#e.set(t,e,n),this.#e.set(e,t,n),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){void 0===e&&(e=t,t=this.diagonalSize);const n=e.slice();return n.splice(t,1),this.#e.addRow(t,n),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const e=[];for(const[n,r]of t.entries())r||e.push(n);e.reverse();for(const t of e)this.removeCross(t);return this}toCompact(){const{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let n=0,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=++r);return e}static fromCompact(t){const e=t.length,n=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const r=new b(n);for(let i=0,s=0,o=0;o<e;o++)r.set(i,s,t[o]),++i>=n&&(i=++s);return r}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield[t,e,n],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield n,++e>=this.diagonalSize&&(e=++t)}}}b.prototype.klassType="SymmetricMatrix";class x extends b{static isDistanceMatrix(t){return b.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,n){return t===e&&(n=0),super.set(t,e,n)}addCross(t,e){return void 0===e&&(e=t,t=this.diagonalSize),(e=e.slice())[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new b(this)}clone(){const t=new x(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())e!==n&&t.set(e,n,r);return t}toCompact(){const{diagonalSize:t}=this,e=new Array((t-1)*t/2);for(let n=1,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=1+ ++r);return e}static fromCompact(t){const e=t.length;if(0===e)return new this(0);const n=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);const r=new this(n);for(let i=1,s=0,o=0;o<e;o++)r.set(i,s,t[o]),++i>=n&&(i=1+ ++s);return r}}x.prototype.klassSubType="DistanceMatrix";class M extends w{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class E extends M{constructor(t,e,n){c(t,e),f(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class S extends w{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class A extends w{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}class k{constructor(t){let e,n,r,i,s,o,a,l,h,u=(t=A.checkMatrix(t)).clone(),c=u.rows,f=u.columns,p=new Float64Array(c),g=1;for(e=0;e<c;e++)p[e]=e;for(l=new Float64Array(c),n=0;n<f;n++){for(e=0;e<c;e++)l[e]=u.get(e,n);for(e=0;e<c;e++){for(h=Math.min(e,n),s=0,r=0;r<h;r++)s+=u.get(e,r)*l[r];l[e]-=s,u.set(e,n,l[e])}for(i=n,e=n+1;e<c;e++)Math.abs(l[e])>Math.abs(l[i])&&(i=e);if(i!==n){for(r=0;r<f;r++)o=u.get(i,r),u.set(i,r,u.get(n,r)),u.set(n,r,o);a=p[i],p[i]=p[n],p[n]=a,g=-g}if(n<c&&0!==u.get(n,n))for(e=n+1;e<c;e++)u.set(e,n,u.get(e,n)/u.get(n,n))}this.LU=u,this.pivotVector=p,this.pivotSign=g}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=v.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,s=t.columns,o=t.subMatrixRow(this.pivotVector,0,s-1),a=e.columns;for(i=0;i<a;i++)for(n=i+1;n<a;n++)for(r=0;r<s;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*e.get(n,i));for(i=a-1;i>=0;i--){for(r=0;r<s;r++)o.set(i,r,o.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<s;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*e.get(n,i))}return o}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new v(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new v(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function N(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class R{constructor(t){let e,n,r,i,s=(t=A.checkMatrix(t)).clone(),o=t.rows,a=t.columns,l=new Float64Array(a);for(r=0;r<a;r++){let t=0;for(e=r;e<o;e++)t=N(t,s.get(e,r));if(0!==t){for(s.get(r,r)<0&&(t=-t),e=r;e<o;e++)s.set(e,r,s.get(e,r)/t);for(s.set(r,r,s.get(r,r)+1),n=r+1;n<a;n++){for(i=0,e=r;e<o;e++)i+=s.get(e,r)*s.get(e,n);for(i=-i/s.get(r,r),e=r;e<o;e++)s.set(e,n,s.get(e,n)+i*s.get(e,r))}}l[r]=-t}this.QR=s,this.Rdiag=l}solve(t){t=v.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,s,o,a=t.columns,l=t.clone(),h=e.columns;for(s=0;s<h;s++)for(i=0;i<a;i++){for(o=0,r=s;r<n;r++)o+=e.get(r,s)*l.get(r,i);for(o=-o/e.get(s,s),r=s;r<n;r++)l.set(r,i,l.get(r,i)+o*e.get(r,s))}for(s=h-1;s>=0;s--){for(i=0;i<a;i++)l.set(s,i,l.get(s,i)/this.Rdiag[s]);for(r=0;r<s;r++)for(i=0;i<a;i++)l.set(r,i,l.get(r,i)-l.get(s,i)*e.get(r,s))}return l.subMatrix(0,h-1,0,a-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new v(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,s=i.rows,o=i.columns,a=new v(s,o);for(n=o-1;n>=0;n--){for(t=0;t<s;t++)a.set(t,n,0);for(a.set(n,n,1),e=n;e<o;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<s;t++)r+=i.get(t,n)*a.get(t,e);for(r=-r/i.get(n,n),t=n;t<s;t++)a.set(t,e,a.get(t,e)+r*i.get(t,n))}}return a}}class C{constructor(t,e={}){if((t=A.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:s=!0,autoTranspose:o=!1}=e;let a,l=Boolean(i),h=Boolean(s),u=!1;if(n<r)if(o){a=t.transpose(),n=a.rows,r=a.columns,u=!0;let e=l;l=h,h=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let c=Math.min(n,r),f=Math.min(n+1,r),p=new Float64Array(f),g=new v(n,c),m=new v(r,r),d=new Float64Array(r),w=new Float64Array(n),_=new Float64Array(f);for(let t=0;t<f;t++)_[t]=t;let y=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),x=Math.max(y,b);for(let t=0;t<x;t++){if(t<y){p[t]=0;for(let e=t;e<n;e++)p[t]=N(p[t],a.get(e,t));if(0!==p[t]){a.get(t,t)<0&&(p[t]=-p[t]);for(let e=t;e<n;e++)a.set(e,t,a.get(e,t)/p[t]);a.set(t,t,a.get(t,t)+1)}p[t]=-p[t]}for(let e=t+1;e<r;e++){if(t<y&&0!==p[t]){let r=0;for(let i=t;i<n;i++)r+=a.get(i,t)*a.get(i,e);r=-r/a.get(t,t);for(let i=t;i<n;i++)a.set(i,e,a.get(i,e)+r*a.get(i,t))}d[e]=a.get(t,e)}if(l&&t<y)for(let e=t;e<n;e++)g.set(e,t,a.get(e,t));if(t<b){d[t]=0;for(let e=t+1;e<r;e++)d[t]=N(d[t],d[e]);if(0!==d[t]){d[t+1]<0&&(d[t]=0-d[t]);for(let e=t+1;e<r;e++)d[e]/=d[t];d[t+1]+=1}if(d[t]=-d[t],t+1<n&&0!==d[t]){for(let e=t+1;e<n;e++)w[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<r;n++)w[e]+=d[n]*a.get(e,n);for(let e=t+1;e<r;e++){let r=-d[e]/d[t+1];for(let i=t+1;i<n;i++)a.set(i,e,a.get(i,e)+r*w[i])}}if(h)for(let e=t+1;e<r;e++)m.set(e,t,d[e])}}let M=Math.min(r,n+1);if(y<r&&(p[y]=a.get(y,y)),n<M&&(p[M-1]=0),b+1<M&&(d[b]=a.get(b,M-1)),d[M-1]=0,l){for(let t=y;t<c;t++){for(let e=0;e<n;e++)g.set(e,t,0);g.set(t,t,1)}for(let t=y-1;t>=0;t--)if(0!==p[t]){for(let e=t+1;e<c;e++){let r=0;for(let i=t;i<n;i++)r+=g.get(i,t)*g.get(i,e);r=-r/g.get(t,t);for(let i=t;i<n;i++)g.set(i,e,g.get(i,e)+r*g.get(i,t))}for(let e=t;e<n;e++)g.set(e,t,-g.get(e,t));g.set(t,t,1+g.get(t,t));for(let e=0;e<t-1;e++)g.set(e,t,0)}else{for(let e=0;e<n;e++)g.set(e,t,0);g.set(t,t,1)}}if(h)for(let t=r-1;t>=0;t--){if(t<b&&0!==d[t])for(let e=t+1;e<r;e++){let n=0;for(let i=t+1;i<r;i++)n+=m.get(i,t)*m.get(i,e);n=-n/m.get(t+1,t);for(let i=t+1;i<r;i++)m.set(i,e,m.get(i,e)+n*m.get(i,t))}for(let e=0;e<r;e++)m.set(e,t,0);m.set(t,t,1)}let E=M-1,S=Number.EPSILON;for(;M>0;){let t,e;for(t=M-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+S*Math.abs(p[t]+Math.abs(p[t+1]));if(Math.abs(d[t])<=e||Number.isNaN(d[t])){d[t]=0;break}}if(t===M-2)e=4;else{let n;for(n=M-1;n>=t&&n!==t;n--){let e=(n!==M?Math.abs(d[n]):0)+(n!==t+1?Math.abs(d[n-1]):0);if(Math.abs(p[n])<=S*e){p[n]=0;break}}n===t?e=3:n===M-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=d[M-2];d[M-2]=0;for(let n=M-2;n>=t;n--){let i=N(p[n],e),s=p[n]/i,o=e/i;if(p[n]=i,n!==t&&(e=-o*d[n-1],d[n-1]=s*d[n-1]),h)for(let t=0;t<r;t++)i=s*m.get(t,n)+o*m.get(t,M-1),m.set(t,M-1,-o*m.get(t,n)+s*m.get(t,M-1)),m.set(t,n,i)}break}case 2:{let e=d[t-1];d[t-1]=0;for(let r=t;r<M;r++){let i=N(p[r],e),s=p[r]/i,o=e/i;if(p[r]=i,e=-o*d[r],d[r]=s*d[r],l)for(let e=0;e<n;e++)i=s*g.get(e,r)+o*g.get(e,t-1),g.set(e,t-1,-o*g.get(e,r)+s*g.get(e,t-1)),g.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(p[M-1]),Math.abs(p[M-2]),Math.abs(d[M-2]),Math.abs(p[t]),Math.abs(d[t])),i=p[M-1]/e,s=p[M-2]/e,o=d[M-2]/e,a=p[t]/e,u=d[t]/e,c=((s+i)*(s-i)+o*o)/2,f=i*o*(i*o);let w=0;0===c&&0===f||(w=c<0?0-Math.sqrt(c*c+f):Math.sqrt(c*c+f),w=f/(c+w));let _=(a+i)*(a-i)+w,y=a*u;for(let e=t;e<M-1;e++){let i=N(_,y);0===i&&(i=Number.MIN_VALUE);let s=_/i,o=y/i;if(e!==t&&(d[e-1]=i),_=s*p[e]+o*d[e],d[e]=s*d[e]-o*p[e],y=o*p[e+1],p[e+1]=s*p[e+1],h)for(let t=0;t<r;t++)i=s*m.get(t,e)+o*m.get(t,e+1),m.set(t,e+1,-o*m.get(t,e)+s*m.get(t,e+1)),m.set(t,e,i);if(i=N(_,y),0===i&&(i=Number.MIN_VALUE),s=_/i,o=y/i,p[e]=i,_=s*d[e]+o*p[e+1],p[e+1]=-o*d[e]+s*p[e+1],y=o*d[e+1],d[e+1]=s*d[e+1],l&&e<n-1)for(let t=0;t<n;t++)i=s*g.get(t,e)+o*g.get(t,e+1),g.set(t,e+1,-o*g.get(t,e)+s*g.get(t,e+1)),g.set(t,e,i)}d[M-2]=_;break}case 4:if(p[t]<=0&&(p[t]=p[t]<0?-p[t]:0,h))for(let e=0;e<=E;e++)m.set(e,t,-m.get(e,t));for(;t<E&&!(p[t]>=p[t+1]);){let e=p[t];if(p[t]=p[t+1],p[t+1]=e,h&&t<r-1)for(let n=0;n<r;n++)e=m.get(n,t+1),m.set(n,t+1,m.get(n,t)),m.set(n,t,e);if(l&&t<n-1)for(let r=0;r<n;r++)e=g.get(r,t+1),g.set(r,t+1,g.get(r,t)),g.set(r,t,e);t++}M--}}if(u){let t=m;m=g,g=t}this.m=n,this.n=r,this.s=p,this.U=g,this.V=m}solve(t){let e=t,n=this.threshold,r=this.s.length,i=v.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=n?i.set(t,t,0):i.set(t,t,1/this.s[t]);let s=this.U,o=this.rightSingularVectors,a=o.mmul(i),l=o.rows,h=s.rows,u=v.zeros(l,h);for(let t=0;t<l;t++)for(let e=0;e<h;e++){let n=0;for(let i=0;i<r;i++)n+=a.get(t,i)*s.get(e,i);u.set(t,e,n)}return u.mmul(e)}solveForDiagonal(t){return this.solve(v.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new v(n,this.s.length);for(let s=0;s<n;s++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(s,n,t.get(s,n)/this.s[n]);let s=this.U,o=s.rows,a=s.columns,l=new v(n,o);for(let t=0;t<n;t++)for(let e=0;e<o;e++){let n=0;for(let r=0;r<a;r++)n+=i.get(t,r)*s.get(e,r);l.set(t,e,n)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return v.diag(this.s)}}function I(t,e,n=!1){return t=A.checkMatrix(t),e=A.checkMatrix(e),n?new C(t).solve(e):t.isSquare()?new k(t).solve(e):new R(t).solve(e)}function T(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function $(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}class P{constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(!(t=A.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,i,s=t.columns,o=new v(s,s),a=new Float64Array(s),l=new Float64Array(s),h=t,u=!1;if(u=!!n||t.isSymmetric(),u){for(r=0;r<s;r++)for(i=0;i<s;i++)o.set(r,i,h.get(r,i));!function(t,e,n,r){let i,s,o,a,l,h,u,c;for(l=0;l<t;l++)n[l]=r.get(t-1,l);for(a=t-1;a>0;a--){for(c=0,o=0,h=0;h<a;h++)c+=Math.abs(n[h]);if(0===c)for(e[a]=n[a-1],l=0;l<a;l++)n[l]=r.get(a-1,l),r.set(a,l,0),r.set(l,a,0);else{for(h=0;h<a;h++)n[h]/=c,o+=n[h]*n[h];for(i=n[a-1],s=Math.sqrt(o),i>0&&(s=-s),e[a]=c*s,o-=i*s,n[a-1]=i-s,l=0;l<a;l++)e[l]=0;for(l=0;l<a;l++){for(i=n[l],r.set(l,a,i),s=e[l]+r.get(l,l)*i,h=l+1;h<=a-1;h++)s+=r.get(h,l)*n[h],e[h]+=r.get(h,l)*i;e[l]=s}for(i=0,l=0;l<a;l++)e[l]/=o,i+=e[l]*n[l];for(u=i/(o+o),l=0;l<a;l++)e[l]-=u*n[l];for(l=0;l<a;l++){for(i=n[l],s=e[l],h=l;h<=a-1;h++)r.set(h,l,r.get(h,l)-(i*e[h]+s*n[h]));n[l]=r.get(a-1,l),r.set(a,l,0)}}n[a]=o}for(a=0;a<t-1;a++){if(r.set(t-1,a,r.get(a,a)),r.set(a,a,1),o=n[a+1],0!==o){for(h=0;h<=a;h++)n[h]=r.get(h,a+1)/o;for(l=0;l<=a;l++){for(s=0,h=0;h<=a;h++)s+=r.get(h,a+1)*r.get(h,l);for(h=0;h<=a;h++)r.set(h,l,r.get(h,l)-s*n[h])}}for(h=0;h<=a;h++)r.set(h,a+1,0)}for(l=0;l<t;l++)n[l]=r.get(t-1,l),r.set(t-1,l,0);r.set(t-1,t-1,1),e[0]=0}(s,l,a,o),function(t,e,n,r){let i,s,o,a,l,h,u,c,f,p,g,m,d,w,_,y;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;let v=0,b=0,x=Number.EPSILON;for(h=0;h<t;h++){for(b=Math.max(b,Math.abs(n[h])+Math.abs(e[h])),u=h;u<t&&!(Math.abs(e[u])<=x*b);)u++;if(u>h)do{for(i=n[h],c=(n[h+1]-i)/(2*e[h]),f=N(c,1),c<0&&(f=-f),n[h]=e[h]/(c+f),n[h+1]=e[h]*(c+f),p=n[h+1],s=i-n[h],o=h+2;o<t;o++)n[o]-=s;for(v+=s,c=n[u],g=1,m=g,d=g,w=e[h+1],_=0,y=0,o=u-1;o>=h;o--)for(d=m,m=g,y=_,i=g*e[o],s=g*c,f=N(c,e[o]),e[o+1]=_*f,_=e[o]/f,g=c/f,c=g*n[o]-_*i,n[o+1]=s+_*(g*i+_*n[o]),l=0;l<t;l++)s=r.get(l,o+1),r.set(l,o+1,_*r.get(l,o)+g*s),r.set(l,o,g*r.get(l,o)-_*s);c=-_*y*d*w*e[h]/p,e[h]=_*c,n[h]=g*c}while(Math.abs(e[h])>x*b);n[h]=n[h]+v,e[h]=0}for(o=0;o<t-1;o++){for(l=o,c=n[o],a=o+1;a<t;a++)n[a]<c&&(l=a,c=n[a]);if(l!==o)for(n[l]=n[o],n[o]=c,a=0;a<t;a++)c=r.get(a,o),r.set(a,o,r.get(a,l)),r.set(a,l,c)}}(s,l,a,o)}else{let t=new v(s,s),e=new Float64Array(s);for(i=0;i<s;i++)for(r=0;r<s;r++)t.set(r,i,h.get(r,i));!function(t,e,n,r){let i,s,o,a,l,h,u,c=0,f=t-1;for(h=c+1;h<=f-1;h++){for(u=0,a=h;a<=f;a++)u+=Math.abs(e.get(a,h-1));if(0!==u){for(o=0,a=f;a>=h;a--)n[a]=e.get(a,h-1)/u,o+=n[a]*n[a];for(s=Math.sqrt(o),n[h]>0&&(s=-s),o-=n[h]*s,n[h]=n[h]-s,l=h;l<t;l++){for(i=0,a=f;a>=h;a--)i+=n[a]*e.get(a,l);for(i/=o,a=h;a<=f;a++)e.set(a,l,e.get(a,l)-i*n[a])}for(a=0;a<=f;a++){for(i=0,l=f;l>=h;l--)i+=n[l]*e.get(a,l);for(i/=o,l=h;l<=f;l++)e.set(a,l,e.get(a,l)-i*n[l])}n[h]=u*n[h],e.set(h,h-1,u*s)}}for(a=0;a<t;a++)for(l=0;l<t;l++)r.set(a,l,a===l?1:0);for(h=f-1;h>=c+1;h--)if(0!==e.get(h,h-1)){for(a=h+1;a<=f;a++)n[a]=e.get(a,h-1);for(l=h;l<=f;l++){for(s=0,a=h;a<=f;a++)s+=n[a]*r.get(a,l);for(s=s/n[h]/e.get(h,h-1),a=h;a<=f;a++)r.set(a,l,r.get(a,l)+s*n[a])}}}(s,t,e,o),function(t,e,n,r,i){let s,o,a,l,h,u,c,f,p,g,m,d,w,_,y,v=t-1,b=0,x=t-1,M=Number.EPSILON,E=0,S=0,A=0,k=0,N=0,R=0,C=0,I=0;for(s=0;s<t;s++)for((s<b||s>x)&&(n[s]=i.get(s,s),e[s]=0),o=Math.max(s-1,0);o<t;o++)S+=Math.abs(i.get(s,o));for(;v>=b;){for(l=v;l>b&&(R=Math.abs(i.get(l-1,l-1))+Math.abs(i.get(l,l)),0===R&&(R=S),!(Math.abs(i.get(l,l-1))<M*R));)l--;if(l===v)i.set(v,v,i.get(v,v)+E),n[v]=i.get(v,v),e[v]=0,v--,I=0;else if(l===v-1){if(c=i.get(v,v-1)*i.get(v-1,v),A=(i.get(v-1,v-1)-i.get(v,v))/2,k=A*A+c,C=Math.sqrt(Math.abs(k)),i.set(v,v,i.get(v,v)+E),i.set(v-1,v-1,i.get(v-1,v-1)+E),f=i.get(v,v),k>=0){for(C=A>=0?A+C:A-C,n[v-1]=f+C,n[v]=n[v-1],0!==C&&(n[v]=f-c/C),e[v-1]=0,e[v]=0,f=i.get(v,v-1),R=Math.abs(f)+Math.abs(C),A=f/R,k=C/R,N=Math.sqrt(A*A+k*k),A/=N,k/=N,o=v-1;o<t;o++)C=i.get(v-1,o),i.set(v-1,o,k*C+A*i.get(v,o)),i.set(v,o,k*i.get(v,o)-A*C);for(s=0;s<=v;s++)C=i.get(s,v-1),i.set(s,v-1,k*C+A*i.get(s,v)),i.set(s,v,k*i.get(s,v)-A*C);for(s=b;s<=x;s++)C=r.get(s,v-1),r.set(s,v-1,k*C+A*r.get(s,v)),r.set(s,v,k*r.get(s,v)-A*C)}else n[v-1]=f+A,n[v]=f+A,e[v-1]=C,e[v]=-C;v-=2,I=0}else{if(f=i.get(v,v),p=0,c=0,l<v&&(p=i.get(v-1,v-1),c=i.get(v,v-1)*i.get(v-1,v)),10===I){for(E+=f,s=b;s<=v;s++)i.set(s,s,i.get(s,s)-f);R=Math.abs(i.get(v,v-1))+Math.abs(i.get(v-1,v-2)),f=p=.75*R,c=-.4375*R*R}if(30===I&&(R=(p-f)/2,R=R*R+c,R>0)){for(R=Math.sqrt(R),p<f&&(R=-R),R=f-c/((p-f)/2+R),s=b;s<=v;s++)i.set(s,s,i.get(s,s)-R);E+=R,f=p=c=.964}for(I+=1,h=v-2;h>=l&&(C=i.get(h,h),N=f-C,R=p-C,A=(N*R-c)/i.get(h+1,h)+i.get(h,h+1),k=i.get(h+1,h+1)-C-N-R,N=i.get(h+2,h+1),R=Math.abs(A)+Math.abs(k)+Math.abs(N),A/=R,k/=R,N/=R,h!==l)&&!(Math.abs(i.get(h,h-1))*(Math.abs(k)+Math.abs(N))<M*(Math.abs(A)*(Math.abs(i.get(h-1,h-1))+Math.abs(C)+Math.abs(i.get(h+1,h+1)))));)h--;for(s=h+2;s<=v;s++)i.set(s,s-2,0),s>h+2&&i.set(s,s-3,0);for(a=h;a<=v-1&&(_=a!==v-1,a!==h&&(A=i.get(a,a-1),k=i.get(a+1,a-1),N=_?i.get(a+2,a-1):0,f=Math.abs(A)+Math.abs(k)+Math.abs(N),0!==f&&(A/=f,k/=f,N/=f)),0!==f);a++)if(R=Math.sqrt(A*A+k*k+N*N),A<0&&(R=-R),0!==R){for(a!==h?i.set(a,a-1,-R*f):l!==h&&i.set(a,a-1,-i.get(a,a-1)),A+=R,f=A/R,p=k/R,C=N/R,k/=A,N/=A,o=a;o<t;o++)A=i.get(a,o)+k*i.get(a+1,o),_&&(A+=N*i.get(a+2,o),i.set(a+2,o,i.get(a+2,o)-A*C)),i.set(a,o,i.get(a,o)-A*f),i.set(a+1,o,i.get(a+1,o)-A*p);for(s=0;s<=Math.min(v,a+3);s++)A=f*i.get(s,a)+p*i.get(s,a+1),_&&(A+=C*i.get(s,a+2),i.set(s,a+2,i.get(s,a+2)-A*N)),i.set(s,a,i.get(s,a)-A),i.set(s,a+1,i.get(s,a+1)-A*k);for(s=b;s<=x;s++)A=f*r.get(s,a)+p*r.get(s,a+1),_&&(A+=C*r.get(s,a+2),r.set(s,a+2,r.get(s,a+2)-A*N)),r.set(s,a,r.get(s,a)-A),r.set(s,a+1,r.get(s,a+1)-A*k)}}}if(0===S)return;for(v=t-1;v>=0;v--)if(A=n[v],k=e[v],0===k)for(l=v,i.set(v,v,1),s=v-1;s>=0;s--){for(c=i.get(s,s)-A,N=0,o=l;o<=v;o++)N+=i.get(s,o)*i.get(o,v);if(e[s]<0)C=c,R=N;else if(l=s,0===e[s]?i.set(s,v,0!==c?-N/c:-N/(M*S)):(f=i.get(s,s+1),p=i.get(s+1,s),k=(n[s]-A)*(n[s]-A)+e[s]*e[s],u=(f*R-C*N)/k,i.set(s,v,u),i.set(s+1,v,Math.abs(f)>Math.abs(C)?(-N-c*u)/f:(-R-p*u)/C)),u=Math.abs(i.get(s,v)),M*u*u>1)for(o=s;o<=v;o++)i.set(o,v,i.get(o,v)/u)}else if(k<0)for(l=v-1,Math.abs(i.get(v,v-1))>Math.abs(i.get(v-1,v))?(i.set(v-1,v-1,k/i.get(v,v-1)),i.set(v-1,v,-(i.get(v,v)-A)/i.get(v,v-1))):(y=V(0,-i.get(v-1,v),i.get(v-1,v-1)-A,k),i.set(v-1,v-1,y[0]),i.set(v-1,v,y[1])),i.set(v,v-1,0),i.set(v,v,1),s=v-2;s>=0;s--){for(g=0,m=0,o=l;o<=v;o++)g+=i.get(s,o)*i.get(o,v-1),m+=i.get(s,o)*i.get(o,v);if(c=i.get(s,s)-A,e[s]<0)C=c,N=g,R=m;else if(l=s,0===e[s]?(y=V(-g,-m,c,k),i.set(s,v-1,y[0]),i.set(s,v,y[1])):(f=i.get(s,s+1),p=i.get(s+1,s),d=(n[s]-A)*(n[s]-A)+e[s]*e[s]-k*k,w=2*(n[s]-A)*k,0===d&&0===w&&(d=M*S*(Math.abs(c)+Math.abs(k)+Math.abs(f)+Math.abs(p)+Math.abs(C))),y=V(f*N-C*g+k*m,f*R-C*m-k*g,d,w),i.set(s,v-1,y[0]),i.set(s,v,y[1]),Math.abs(f)>Math.abs(C)+Math.abs(k)?(i.set(s+1,v-1,(-g-c*i.get(s,v-1)+k*i.get(s,v))/f),i.set(s+1,v,(-m-c*i.get(s,v)-k*i.get(s,v-1))/f)):(y=V(-N-p*i.get(s,v-1),-R-p*i.get(s,v),C,k),i.set(s+1,v-1,y[0]),i.set(s+1,v,y[1]))),u=Math.max(Math.abs(i.get(s,v-1)),Math.abs(i.get(s,v))),M*u*u>1)for(o=s;o<=v;o++)i.set(o,v-1,i.get(o,v-1)/u),i.set(o,v,i.get(o,v)/u)}for(s=0;s<t;s++)if(s<b||s>x)for(o=s;o<t;o++)r.set(s,o,i.get(s,o));for(o=t-1;o>=b;o--)for(s=b;s<=x;s++){for(C=0,a=b;a<=Math.min(o,x);a++)C+=r.get(s,a)*i.get(a,o);r.set(s,o,C)}}(s,l,a,o,t)}this.n=s,this.e=l,this.d=a,this.V=o}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,s=new v(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)s.set(t,e,0);s.set(t,t,i[t]),r[t]>0?s.set(t,t+1,r[t]):r[t]<0&&s.set(t,t-1,r[t])}return s}}function V(t,e,n,r){let i,s;return Math.abs(n)>Math.abs(r)?(i=r/n,s=n+i*r,[(t+i*e)/s,(e-i*t)/s]):(i=n/r,s=r+i*n,[(i*t+e)/s,(i*e-t)/s])}class q{constructor(t){if(!(t=A.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,s=i.rows,o=new v(s,s),a=!0;for(n=0;n<s;n++){let t=0;for(r=0;r<n;r++){let s=0;for(e=0;e<r;e++)s+=o.get(r,e)*o.get(n,e);s=(i.get(n,r)-s)/o.get(r,r),o.set(n,r,s),t+=s*s}for(t=i.get(n,n)-t,a&&=t>0,o.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<s;r++)o.set(n,r,0)}this.L=o,this.positiveDefinite=a}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=A.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,s,o=t.columns,a=t.clone();for(s=0;s<n;s++)for(i=0;i<o;i++){for(r=0;r<s;r++)a.set(s,i,a.get(s,i)-a.get(r,i)*e.get(s,r));a.set(s,i,a.get(s,i)/e.get(s,s))}for(s=n-1;s>=0;s--)for(i=0;i<o;i++){for(r=s+1;r<n;r++)a.set(s,i,a.get(s,i)-a.get(r,i)*e.get(r,s));a.set(s,i,a.get(s,i)/e.get(s,s))}return a}get lowerTriangularMatrix(){return this.L}}class D{constructor(e,n={}){e=A.checkMatrix(e);let{Y:r}=n;const{scaleScores:i=!1,maxIterations:s=1e3,terminationCriteria:o=1e-10}=n;let a;if(r){if(r=t.isAnyArray(r)&&"number"==typeof r[0]?v.columnVector(r):A.checkMatrix(r),r.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=r.getColumnVector(0)}else a=e.getColumnVector(0);let l,h,u,c,f=1;for(let t=0;t<s&&f>o;t++)u=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),u=u.div(u.norm()),l=e.mmul(u).div(u.transpose().mmul(u).get(0,0)),t>0&&(f=l.clone().sub(c).pow(2).sum()),c=l.clone(),r?(h=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),h=h.div(h.norm()),a=r.mmul(h).div(h.transpose().mmul(h).get(0,0))):a=l;if(r){let t=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));t=t.div(t.norm());let n=e.clone().sub(l.clone().mmul(t.transpose())),i=a.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),s=r.clone().sub(l.clone().mulS(i.get(0,0)).mmul(h.transpose()));this.t=l,this.p=t.transpose(),this.w=u.transpose(),this.q=h,this.u=a,this.s=l.transpose().mmul(l),this.xResidual=n,this.yResidual=s,this.betas=i}else this.w=u.transpose(),this.s=l.transpose().mmul(l).sqrt(),this.t=i?l.clone().div(this.s.get(0,0)):l,this.xResidual=e.sub(l.mmul(u.transpose()))}}return qi.AbstractMatrix=w,qi.CHO=q,qi.CholeskyDecomposition=q,qi.DistanceMatrix=x,qi.EVD=P,qi.EigenvalueDecomposition=P,qi.LU=k,qi.LuDecomposition=k,qi.Matrix=v,qi.MatrixColumnSelectionView=class extends M{constructor(t,e){f(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}},qi.MatrixColumnView=class extends M{constructor(t,e){l(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}},qi.MatrixFlipColumnView=class extends M{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}},qi.MatrixFlipRowView=class extends M{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}},qi.MatrixRowSelectionView=class extends M{constructor(t,e){c(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}},qi.MatrixRowView=class extends M{constructor(t,e){a(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}},qi.MatrixSelectionView=E,qi.MatrixSubView=class extends M{constructor(t,e,n,r,i){p(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}},qi.MatrixTransposeView=class extends M{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}},qi.NIPALS=D,qi.Nipals=D,qi.QR=R,qi.QrDecomposition=R,qi.SVD=C,qi.SingularValueDecomposition=C,qi.SymmetricMatrix=b,qi.WrapperMatrix1D=S,qi.WrapperMatrix2D=A,qi.correlation=function(e,n=e,r={}){e=new v(e);let i=!1;if("object"!=typeof n||v.isMatrix(n)||t.isAnyArray(n)?n=new v(n):(r=n,n=e,i=!0),e.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0,scale:o=!0}=r;s&&(e.center("column"),i||n.center("column")),o&&(e.scale("column"),i||n.scale("column"));const a=e.standardDeviation("column",{unbiased:!0}),l=i?a:n.standardDeviation("column",{unbiased:!0}),h=e.transpose().mmul(n);for(let t=0;t<h.rows;t++)for(let n=0;n<h.columns;n++)h.set(t,n,h.get(t,n)*(1/(a[t]*l[n]))*(1/(e.rows-1)));return h},qi.covariance=function(e,n=e,r={}){e=new v(e);let i=!1;if("object"!=typeof n||v.isMatrix(n)||t.isAnyArray(n)?n=new v(n):(r=n,n=e,i=!0),e.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0}=r;s&&(e=e.center("column"),i||(n=n.center("column")));const o=e.transpose().mmul(n);for(let t=0;t<o.rows;t++)for(let n=0;n<o.columns;n++)o.set(t,n,o.get(t,n)*(1/(e.rows-1)));return o},qi.default=v,qi.determinant=function t(e){if((e=v.checkMatrix(e)).isSquare()){if(0===e.columns)return 1;let n,r,i,s;if(2===e.columns)return n=e.get(0,0),r=e.get(0,1),i=e.get(1,0),s=e.get(1,1),n*s-r*i;if(3===e.columns){let s,o,a;return s=new E(e,[1,2],[1,2]),o=new E(e,[1,2],[0,2]),a=new E(e,[1,2],[0,1]),n=e.get(0,0),r=e.get(0,1),i=e.get(0,2),n*t(s)-r*t(o)+i*t(a)}return new k(e).determinant}throw Error("determinant can only be calculated for a square matrix")},qi.inverse=function(t,e=!1){return t=A.checkMatrix(t),e?new C(t).inverse():I(t,v.eye(t.rows))},qi.linearDependencies=function(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;let i=(t=v.checkMatrix(t)).rows,s=new v(i,i);for(let e=0;e<i;e++){let o=v.columnVector(t.getRow(e)),a=t.subMatrixRow(T(i,e)).transpose(),l=new C(a).solve(o),h=v.sub(o,a.mmul(l)).abs().max();s.setRow(e,$(h,l,e,n,r))}return s},qi.pseudoInverse=function(t,e=Number.EPSILON){if((t=v.checkMatrix(t)).isEmpty())return t.transpose();let n=new C(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,s=n.diagonal;for(let t=0;t<s.length;t++)Math.abs(s[t])>e?s[t]=1/s[t]:s[t]=0;return i.mmul(v.diag(s).mmul(r.transpose()))},qi.solve=I,qi.wrap=function(e,n){if(t.isAnyArray(e))return e[0]&&t.isAnyArray(e[0])?new A(e):new S(e,n);throw new Error("the argument is not an array")},qi}var Ui=Li(),Bi=Pi(Ui);const Hi=Ui.EVD,Xi=Ui.Matrix,Yi=Ui.MatrixTransposeView,Wi=Ui.NIPALS,Gi=Ui.SVD;Bi.Matrix?Bi.Matrix:Ui.Matrix;class Ji{constructor(t,e={},n){if(this.U=null,this.S=null,n)return this.center=n.center,this.scale=n.scale,this.means=n.means,this.stdevs=n.stdevs,this.U=Xi.checkMatrix(n.U),this.S=n.S,this.R=n.R,void(this.excludedFeatures=n.excludedFeatures||[]);let r;r=(Array.isArray(t),new Xi(t));const{isCovarianceMatrix:i=!1,method:s="SVD",nCompNIPALS:o=2,center:a=!0,scale:l=!1,ignoreZeroVariance:h=!1}=e;if(this.center=a,this.scale=l,this.means=null,this.stdevs=null,this.excludedFeatures=[],i)this._computeFromCovarianceMatrix(r);else switch(this._adjust(r,h),s){case"covarianceMatrix":{const t=new Yi(r).mmul(r).div(r.rows-1);this._computeFromCovarianceMatrix(t);break}case"NIPALS":this._computeWithNIPALS(r,o);break;case"SVD":{const t=new Gi(r,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=t.rightSingularVectors;const e=t.diagonal,n=[];for(const t of e)n.push(t*t/(r.rows-1));this.S=n;break}default:throw new Error(`unknown method: ${s}`)}}static load(t){if("string"!=typeof t.name)throw new TypeError("model must have a name property");if("PCA"!==t.name)throw new RangeError(`invalid model: ${t.name}`);return new Ji(void 0,void 0,t)}predict(t,e={}){const{nComponents:n=this.U.columns}=e;let r;if(r=(Array.isArray(t),new Xi(t)),this.center&&(r.subRowVector(this.means),this.scale)){for(let t of this.excludedFeatures)r.removeColumn(t);r.divRowVector(this.stdevs)}let i=r.mmul(this.U);return i.subMatrix(0,i.rows-1,0,n-1)}invert(t){let e=(t=Xi.checkMatrix(t)).mmul(this.U.transpose());return this.center&&(this.scale&&e.mulRowVector(this.stdevs),e.addRowVector(this.means)),e}getExplainedVariance(){let t=0;if(this.S)for(const e of this.S)t+=e;return this.S?this.S.map(e=>e/t):[]}getCumulativeVariance(){let t=this.getExplainedVariance();for(let e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map(t=>Math.sqrt(t))}getLoadings(){return this.U.transpose()}toJSON(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S,excludedFeatures:this.excludedFeatures}}_adjust(t,e){if(this.center){const n=t.mean("column"),r=this.scale?t.standardDeviation("column",{mean:n}):null;if(this.means=n,t.subRowVector(n),this.scale){for(let n=0;n<r.length;n++)if(0===r[n]){if(!e)throw new RangeError(`Cannot scale the dataset (standard deviation is zero at index ${n}`);t.removeColumn(n),r.splice(n,1),this.excludedFeatures.push(n),n--}this.stdevs=r,t.divRowVector(r)}}}_computeFromCovarianceMatrix(t){const e=new Hi(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix,this.U.flipRows(),this.S=e.realEigenvalues,this.S.reverse()}_computeWithNIPALS(t,e){this.U=new Xi(e,t.columns),this.S=[];let n=t;for(let t=0;t<e;t++){let e=new Wi(n);this.U.setRow(t,e.w.transpose()),this.S.push(Math.pow(e.s.get(0,0),2)),n=e.xResidual}this.U=this.U.transpose()}}console.log("pca.mjs loaded");const Qi={data:{}};Qi.data.divNum=1,console.log("pca pcaObj div #:",Qi.data.divNum);function Ki(t,e,n){const r=Kt(".points").filter(t=>t.group!==e),i=Kt(".keyRects").filter(t=>t===e),s=Kt(".points").filter(t=>t.group===e),o=Kt(".keyRects").filter(t=>t!==e);r.transition().attr("opacity",.1),o.transition().attr("opacity",.1),s.transition().attr("opacity",n),i.transition().attr("opacity",n)}async function Zi(e={}){console.log("RUNNING pca_plot()-------------------------------");const{divid:n,data:r=t,width:i=400,height:a=200,colors:h=["red","blue","green","orange","purple","pink","yellow"]}=e,u=await async function(t){console.log("RUNNING pcaScores()-------------------------------");const e=s(t);e.map(Object.values),o(t).map(t=>Object.values(t)).flat();let n=(await l(e)).map(Object.values);return new Ji(n,{center:!0,scale:!0}).predict(n).toJSON().map((e,n)=>{const r=Object.keys(t[n]),i={group:t[n].species,name:"id_"+n};return r.forEach((t,n)=>{i[`PC${n+1}`]=e[n]}),i}).map(({PC1:t,PC2:e,group:n,name:r})=>({PC1:t,PC2:e,group:n,name:r}))}(r),c=[...new Set(u.map(t=>t.group))],f=fr(h).domain(c),p=25,g=170,m=45,d=45,w=S(u,t=>t.PC1)- -.1*S(u,t=>t.PC1),_=E(u,t=>t.PC1)+.1*E(u,t=>t.PC1),y=xr().domain([w,_]).range([d,i-g]),v=xr().domain(function(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(void 0===n?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}(u,t=>t.PC2)).range([a-m,p]),b=Qt("svg").style("background","transparent").style("overflow","visible");b.selectAll(".tick text").attr("fill","#000000"),b.selectAll(".domain, .tick line").attr("stroke","#000000"),b.id="svgid",b.append("text").attr("x",i/2-d).attr("y",p/2).attr("text-anchor","middle").style("font-size","16px").style("font-family","sans-serif").text("PCA Plot");const x=b.attr("width",i).attr("height",a).append("g");x.append("g").call(t=>t.attr("transform",`translate(0,${a-m+5})`).call(function(t){return $(3,t)}(y)).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",i-d-20).attr("y",15).attr("fill","#000000").attr("font-weight","bold").attr("text-anchor","end").text("PC1"))),x.append("g").call(t=>t.attr("transform",`translate(${d-5},0)`).call(function(t){return $(4,t)}(v)).call(t=>t.select(".domain").remove()).call(t=>t.select(".tick:last-of-type text").clone().attr("x",-25).attr("y",-25).attr("fill","#000000").attr("text-anchor","start").attr("font-weight","bold").text("PC2"))),x.append("rect").attr("id","background").attr("x",d).attr("y",p).attr("width",i-d-g).attr("height",a-p-m).attr("fill","white").on("click",(t,e)=>Ki(0,e,.7));const M=x.append("g").attr("class","gPoints"),A=function(){var t=function(){return"n"},e=function(){return[0,0]},n=function(){return" "},r=document.body,i=c(),s=null,o=null,a=null;function l(t){s=function(t){var e=t.node();return e?"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement:null}(t),s&&(o=s.createSVGPoint(),r.appendChild(i))}l.show=function(){var i=Array.prototype.slice.call(arguments);i[i.length-1]instanceof SVGElement&&(a=i.pop());var s,o=n.apply(this,i),c=e.apply(this,i),p=t.apply(this,i),g=f(),m=u.length,d=document.documentElement.scrollTop||r.scrollTop,w=document.documentElement.scrollLeft||r.scrollLeft;for(g.html(o).style("opacity",1).style("pointer-events","all");m--;)g.classed(u[m],!1);return s=h.get(p).apply(this),g.classed(p,!0).style("top",s.top+c[0]+d+"px").style("left",s.left+c[1]+w+"px"),l},l.hide=function(){return f().style("opacity",0).style("pointer-events","none"),l},l.attr=function(t,e){if(arguments.length<2&&"string"==typeof t)return f().attr(t);var n=Array.prototype.slice.call(arguments);return Ti.prototype.attr.apply(f(),n),l},l.style=function(t,e){if(arguments.length<2&&"string"==typeof t)return f().style(t);var n=Array.prototype.slice.call(arguments);return Ti.prototype.style.apply(f(),n),l},l.direction=function(e){return arguments.length?(t=null==e?e:g(e),l):t},l.offset=function(t){return arguments.length?(e=null==t?t:g(t),l):e},l.html=function(t){return arguments.length?(n=null==t?t:g(t),l):n},l.rootElement=function(t){return arguments.length?(r=null==t?t:g(t),l):r},l.destroy=function(){return i&&(f().remove(),i=null),l};var h=Ar({n:function(){var t=p(this);return{top:t.n.y-i.offsetHeight,left:t.n.x-i.offsetWidth/2}},s:function(){var t=p(this);return{top:t.s.y,left:t.s.x-i.offsetWidth/2}},e:function(){var t=p(this);return{top:t.e.y-i.offsetHeight/2,left:t.e.x}},w:function(){var t=p(this);return{top:t.w.y-i.offsetHeight/2,left:t.w.x-i.offsetWidth}},nw:function(){var t=p(this);return{top:t.nw.y-i.offsetHeight,left:t.nw.x-i.offsetWidth}},ne:function(){var t=p(this);return{top:t.ne.y-i.offsetHeight,left:t.ne.x}},sw:function(){var t=p(this);return{top:t.sw.y,left:t.sw.x-i.offsetWidth}},se:function(){var t=p(this);return{top:t.se.y,left:t.se.x}}}),u=h.keys();function c(){var t=$i(document.createElement("div"));return t.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function f(){return null==i&&(i=c(),r.appendChild(i)),$i(i)}function p(t){for(var e=a||t;null==e.getScreenCTM&&null!=e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),i=e.getBBox(),s=i.width,l=i.height,h=i.x,u=i.y;return o.x=h,o.y=u,n.nw=o.matrixTransform(r),o.x+=s,n.ne=o.matrixTransform(r),o.y+=l,n.se=o.matrixTransform(r),o.x-=s,n.sw=o.matrixTransform(r),o.y-=l/2,n.w=o.matrixTransform(r),o.x+=s,n.e=o.matrixTransform(r),o.x-=s/2,o.y-=l/2,n.n=o.matrixTransform(r),o.y+=l,n.s=o.matrixTransform(r),n}function g(t){return"function"==typeof t?t:function(){return t}}return l}().style("border","solid 2px navy").style("background-color","white").style("color","#000").style("border-radius","7px").style("font-family","monospace").style("width","9%").html((t,e)=>`\n          <div style='text-align: center'>\n            name:${e.name} <br/>\n            pc1:${e.PC1.toFixed(2)} <br/>\n            pc2:${e.PC2.toFixed(2)}\n          </div>`);b.call(A),M.selectAll(),x.append("g").style("isolation","isolate").selectAll("circle").data(u).enter().append("circle").attr("class","points").attr("cx",t=>y(t.PC1)).attr("cy",t=>v(t.PC2)).attr("fill",t=>f(t.group)).attr("opacity",.7).attr("r",4).on("mouseover",A.show).on("mouseout",A.hide);const k=x.append("g").selectAll("rect").data(c);if(k.enter().append("rect").attr("class","keyRects").attr("x",i-d-50).attr("y",(t,e)=>20*e).attr("width",12).attr("height",12).attr("fill",t=>f(t)).on("click",(t,e)=>Ki(0,e,.7)),k.enter().append("text").attr("x",t=>i-d-30).attr("y",(t,e)=>20*e).attr("dy","0.7em").text(t=>`${t}`).style("font-size","11px").on("click",(t,e)=>Ki(0,e,.7)),document.getElementById(n)){console.log("pcaPlot div provided in function parameters:",n);const t=document.getElementById(n);t.innerHTML="",t.appendChild(b.node())}else if(!document.getElementById(n)){console.log("pcaPlot div  NOT provided in function parameters or doesn't exist, creating div....");const t=document.createElement("div");t.appendChild(b.node()),document.body.appendChild(t),console.log("pca() div without assigned id:",t)}return console.log("pca_plot() end-----------------"),b.node()}const ts="0.1.0";export{a as asDataFrame,n as convertStrToNumber,h as createTableFromCSV,e as csvToJson,t as irisData,Zi as pca_plot,s as removeNonNumberValues,r as removeNonNumbers,o as removeNumberValues,i as removeNumbers,l as scale,u as textBox,ts as version};
//# sourceMappingURL=sdk.mjs.map
